const hideLoadingScreen=()=>{const e=document.getElementById("loading-screen");e&&(e.style.opacity="0",e.style.transition="opacity 0.3s ease-out",setTimeout(()=>e.remove(),300))},{useState:useState,useEffect:useEffect,useCallback:useCallback,useMemo:useMemo,useRef:useRef}=React,utils={saveToStorage:(e,t)=>{try{const a="swimMeetScore_"+e,r=JSON.stringify(t);return localStorage.setItem(a,r),!0}catch(e){return"QuotaExceededError"===e.name&&(console.error("Storage quota exceeded. Some data may not be saved."),!1)}},loadFromStorage:(e,t)=>{try{const a=localStorage.getItem("swimMeetScore_"+e);if(!a)return t;const r=JSON.parse(a);return null!=r?r:t}catch(e){return console.error("Error loading from storage:",e),t}},generateId:()=>Date.now().toString(36)+Math.random().toString(36).substr(2),validateTeamName:e=>{const t=(e||"").trim();return 0===t.length?{valid:!1,error:"Team name cannot be empty"}:t.length>50?{valid:!1,error:"Team name must be 50 characters or less"}:/<[^>]*>/g.test(t)?{valid:!1,error:"Team name contains invalid characters"}:{valid:!0,value:t}},validateEventName:(e,t)=>{if("diving"===t)return{valid:!0,value:"Diving"};const a=(e||"").trim();return 0===a.length?{valid:!1,error:"Event name cannot be empty"}:a.length>100?{valid:!1,error:"Event name must be 100 characters or less"}:/<[^>]*>/g.test(a)?{valid:!1,error:"Event name contains invalid characters"}:{valid:!0,value:a}},validateTemplateName:e=>{const t=(e||"").trim();return 0===t.length?{valid:!1,error:"Template name cannot be empty"}:t.length>50?{valid:!1,error:"Template name must be 50 characters or less"}:{valid:!0,value:t}},validateNumber:(e,t,a,r)=>{const n=parseInt(e,10);return isNaN(n)?r:Math.max(t,Math.min(a,n))},escapeHtml:e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),debounce:(e,t)=>{let a;return function(...r){clearTimeout(a),a=setTimeout(()=>{clearTimeout(a),e(...r)},t)}}},Plus=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})),X=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})),Undo=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a5 5 0 015 5v0a5 5 0 01-5 5H10M3 10l4-4M3 10l4 4"})),Redo=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10H11a5 5 0 00-5 5v0a5 5 0 005 5h3M21 10l-4-4M21 10l-4 4"})),Settings=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})),HelpCircle=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"}),React.createElement("circle",{cx:"12",cy:"17",r:"0.5",fill:"currentColor",stroke:"none"})),Share=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})),Mail=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})),Swimmer=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("circle",{cx:"19",cy:"6",r:"2.5",strokeWidth:2}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 18c1.2 0 2-.8 3-1.5s1.8-1.5 3-1.5 2 .8 3 1.5 1.8 1.5 3 1.5 2-.8 3-1.5 1.8-1.5 3-1.5"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 22c1.2 0 2-.8 3-1.5s1.8-1.5 3-1.5 2 .8 3 1.5 1.8 1.5 3 1.5 2-.8 3-1.5 1.8-1.5 3-1.5"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16.5 7.5L12 10l-4.5 2.5"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 14.5l2-1.5"})),Zap=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})),Check=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})),Printer=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})),ChevronUp=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})),ChevronDown=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})),Minus=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})),Download=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"})),Upload=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"})),FileText=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 2v6h6M16 13H8M16 17H8M10 9H8"})),Clock=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6l4 2"})),Trash=({className:e})=>React.createElement("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})),CollapsibleSection=({id:e,title:t,description:a,icon:r,isCollapsed:n,onToggle:l,darkMode:s,children:o,accentColor:c="cyan"})=>{const i=useRef(null),[m,d]=useState("2000px");useEffect(()=>{i.current&&!n&&d(`${i.current.scrollHeight+32}px`)},[n,o]);const g={cyan:{header:s?"bg-cyan-900/40 hover:bg-cyan-900/60":"bg-cyan-50 hover:bg-cyan-100",icon:s?"text-cyan-400":"text-cyan-600",border:s?"border-cyan-700/50":"border-cyan-200"},amber:{header:s?"bg-amber-900/40 hover:bg-amber-900/60":"bg-amber-50 hover:bg-amber-100",icon:s?"text-amber-400":"text-amber-600",border:s?"border-amber-700/50":"border-amber-200"},red:{header:s?"bg-red-900/40 hover:bg-red-900/60":"bg-red-50 hover:bg-red-100",icon:s?"text-red-400":"text-red-600",border:s?"border-red-700/50":"border-red-200"},purple:{header:s?"bg-purple-900/40 hover:bg-purple-900/60":"bg-purple-50 hover:bg-purple-100",icon:s?"text-purple-400":"text-purple-600",border:s?"border-purple-700/50":"border-purple-200"},green:{header:s?"bg-green-900/40 hover:bg-green-900/60":"bg-green-50 hover:bg-green-100",icon:s?"text-green-400":"text-green-600",border:s?"border-green-700/50":"border-green-200"},blue:{header:s?"bg-blue-900/40 hover:bg-blue-900/60":"bg-blue-50 hover:bg-blue-100",icon:s?"text-blue-400":"text-blue-600",border:s?"border-blue-700/50":"border-blue-200"},slate:{header:s?"bg-slate-700/60 hover:bg-slate-700/80":"bg-slate-100 hover:bg-slate-200",icon:s?"text-slate-300":"text-slate-600",border:s?"border-slate-600/50":"border-slate-300"}},u=g[c]||g.cyan;return React.createElement("div",{className:`settings-section mb-2 border ${u.border} ${s?"bg-gray-800/50":"bg-white"}`},React.createElement("button",{type:"button",onClick:()=>l(e),className:`settings-section-header w-full ${u.header} rounded-t-lg ${n?"rounded-b-lg":""}`,"aria-expanded":!n,"aria-controls":`section-content-${e}`},React.createElement("div",{className:"flex items-center gap-3"},r&&React.createElement(r,{className:`w-5 h-5 ${u.icon}`}),React.createElement("div",{className:"text-left"},React.createElement("h4",{className:"font-semibold text-sm sm:text-base "+(s?"text-white":"text-slate-800")},t),a&&n&&React.createElement("p",{className:"text-xs mt-0.5 "+(s?"text-slate-400":"text-slate-500")},a))),React.createElement(ChevronDown,{className:`chevron-icon w-5 h-5 ${s?"text-slate-400":"text-slate-500"} ${n?"":"rotated"}`})),React.createElement("div",{id:`section-content-${e}`,ref:i,className:"settings-section-content px-4 py-3 "+(n?"collapsed":"expanded"),style:{maxHeight:n?"0px":m}},o))},NumberInput=({value:e,onChange:t,min:a=1,max:r=20,darkMode:n,className:l="",label:s="",id:o=""})=>React.createElement("div",{className:`flex items-center ${l}`},React.createElement("button",{type:"button",onClick:()=>{const r=Math.max(a,(parseInt(e,10)||a)-1);t(r)},className:"touch-btn rounded-l-lg border border-r-0 font-bold text-xl transition-colors "+(n?"bg-gray-600 border-gray-500 text-white hover:bg-gray-500 active:bg-gray-400":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200 active:bg-gray-300"),"aria-label":`Decrease ${s}`},React.createElement(Minus,{className:"w-5 h-5"})),React.createElement("input",{type:"number",inputMode:"numeric",pattern:"[0-9]*",min:a,max:r,value:e,onChange:e=>{const n=e.target.value;if(""===n)return void t(a);const l=parseInt(n,10);isNaN(l)||t(Math.max(a,Math.min(r,l)))},className:"w-16 px-2 py-2 border-t border-b text-center font-medium "+(n?"bg-gray-700 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"),style:{minHeight:"44px"},id:o||void 0,name:o||void 0,"aria-label":s}),React.createElement("button",{type:"button",onClick:()=>{const n=Math.min(r,(parseInt(e,10)||a)+1);t(n)},className:"touch-btn rounded-r-lg border border-l-0 font-bold text-xl transition-colors "+(n?"bg-gray-600 border-gray-500 text-white hover:bg-gray-500 active:bg-gray-400":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200 active:bg-gray-300"),"aria-label":`Increase ${s}`},React.createElement(Plus,{className:"w-5 h-5"}))),PointInput=({value:e,onChange:t,onBlur:a,place:r,darkMode:n,idPrefix:l=""})=>{const s=1===r?"1st":2===r?"2nd":3===r?"3rd":`${r}th`;return React.createElement("div",{className:"p-1.5 sm:p-2 rounded-lg "+(n?"bg-gray-600":"bg-white")},React.createElement("label",{htmlFor:`point-input-${l}${r}`,className:"text-xs font-medium block mb-1 "+(n?"text-gray-300":"text-gray-600")},s),React.createElement("div",{className:"flex items-center justify-center"},React.createElement("button",{type:"button",onClick:()=>{(()=>{const a=Math.max(0,(parseInt(e,10)||0)-1);t(a)})(),a&&a()},className:"touch-btn flex-shrink-0 rounded-l border border-r-0 text-base font-bold transition-colors "+(n?"bg-gray-700 border-gray-500 text-white hover:bg-gray-600 active:bg-gray-500":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200 active:bg-gray-300"),style:{minWidth:"28px",width:"28px",minHeight:"32px"},"aria-label":`Decrease ${s} points`},React.createElement(Minus,{className:"w-3 h-3"})),React.createElement("input",{type:"number",id:`point-input-${l}${r}`,name:`point-input-${l}${r}`,inputMode:"numeric",pattern:"[0-9]*",min:"0",value:e,onChange:e=>{const a=e.target.value;if(""===a)return void t(0);const r=parseInt(a,10);isNaN(r)||t(Math.max(0,Math.min(999,r)))},onBlur:a,onKeyDown:e=>{"Enter"===e.key&&e.target.blur()},className:"w-9 sm:w-11 px-0.5 py-1 border-t border-b text-center text-sm font-medium "+(n?"bg-gray-800 border-gray-500 text-white":"bg-white border-gray-300 text-gray-800"),style:{minHeight:"32px"},"aria-label":`${s} place points`}),React.createElement("button",{type:"button",onClick:()=>{(()=>{const a=Math.min(999,(parseInt(e,10)||0)+1);t(a)})(),a&&a()},className:"touch-btn flex-shrink-0 rounded-r border border-l-0 text-base font-bold transition-colors "+(n?"bg-gray-700 border-gray-500 text-white hover:bg-gray-600 active:bg-gray-500":"bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200 active:bg-gray-300"),style:{minWidth:"28px",width:"28px",minHeight:"32px"},"aria-label":`Increase ${s} points`},React.createElement(Plus,{className:"w-3 h-3"}))))},PlaceSelector=({event:e,place:t,teams:a,darkMode:r,pointSystem:n,numPlaces:l,onUpdate:s,consumedByTie:o,heatLockEnabled:c})=>{const[i,m]=useState(!1),d=useRef(null),g=e.results.find(e=>e.place===t),u=g?.teamIds||[],p="relay"===getEventType(e),b="diving"===getEventType(e),y=c&&!p&&!b&&l>10&&t>=9&&t<=16,h=y?t-8:null,x=1===t?"1st":2===t?"2nd":3===t?"3rd":`${t}th`,v=u.length;let f=n[t]??0,E=null;if(v>1){let e=0;for(let a=0;a<v&&t+a<=l;a++)e+=n[t+a]||0;E=(e/v).toFixed(1).replace(/\.0$/,"")}useEffect(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return o?React.createElement("div",{className:"p-1 rounded opacity-50 "+(r?"bg-gray-800":"bg-gray-200")},React.createElement("span",{className:"text-xs font-medium block "+(r?"text-gray-500":"text-gray-400")},x,y&&React.createElement("span",{className:"ml-0.5 "+(r?"text-amber-400/50":"text-amber-600/50")},"H1:",h)),React.createElement("div",{className:"w-full px-1 py-1 border rounded text-xs italic "+(r?"bg-gray-700 border-gray-600 text-gray-500":"bg-gray-100 border-gray-300 text-gray-400")},"(tied above)")):React.createElement("div",{className:`p-1 rounded ${r?"bg-gray-600":"bg-white"} ${v>1?r?"ring-2 ring-yellow-500":"ring-2 ring-yellow-400":""}`,ref:d},React.createElement("span",{className:"text-xs font-medium block "+(r?"text-gray-300":"text-gray-600")},x,y&&React.createElement("span",{className:"ml-0.5 "+(r?"text-amber-400":"text-amber-600")},"H1:",h),React.createElement("span",{className:"ml-0.5 "+(v>1?r?"text-yellow-400":"text-yellow-600":"")},"(",v>1?`${E} ea`:`${f} pts`,")")),React.createElement("div",{className:"relative"},React.createElement("button",{type:"button",onClick:()=>m(!i),className:`w-full px-1 py-1 border rounded text-xs text-left flex items-center justify-between gap-0.5 ${r?"bg-gray-700 border-gray-500 text-white hover:bg-gray-650":"bg-white border-gray-300 text-gray-800 hover:bg-gray-50"} ${v>1?r?"border-yellow-500":"border-yellow-400":""}`,style:{minHeight:"28px"}},React.createElement("span",{className:"truncate text-xs "+(0===u.length?r?"text-gray-400":"text-gray-500":"")},(()=>{if(0===u.length)return"-";if(1===u.length){const e=a.find(e=>String(e.id)===u[0]);return e?e.name:"-"}return`Tie (${u.length})`})()),React.createElement(ChevronDown,{className:"w-3 h-3 flex-shrink-0 transition-transform "+(i?"rotate-180":"")})),i&&React.createElement("div",{className:"absolute z-50 mt-1 w-full min-w-[140px] rounded-lg shadow-lg border "+(r?"bg-gray-700 border-gray-600":"bg-white border-gray-200"),style:{maxHeight:"400px",overflowY:"auto"}},a.map(a=>{const n=u.includes(String(a.id));return React.createElement("label",{key:a.id,className:"flex items-center gap-2 px-3 py-2 cursor-pointer transition-colors "+(n?r?"bg-cyan-700":"bg-blue-100":r?"hover:bg-gray-600":"hover:bg-gray-100")},React.createElement("input",{type:"checkbox",id:`team-select-${a.id}`,name:`team-select-${a.id}`,checked:n,onChange:r=>((a,r)=>{s(e.id,t,a,r)})(a.id,r.target.checked),className:"w-4 h-4 rounded flex-shrink-0"}),React.createElement("span",{className:"text-sm "+(r?"text-white":"text-gray-800")},a.name))}))),v>1&&React.createElement("div",{className:"text-xs font-medium "+(r?"text-yellow-400":"text-yellow-600")},"ðŸ¤ TIE: ",v," teams"))},triggerHaptic=(e="light")=>{if("vibrate"in navigator){const t={light:[10],medium:[20],heavy:[30]};navigator.vibrate(t[e]||t.light)}},QuickEntryEventCard=({event:e,teams:t,darkMode:a,numPlaces:r,pointSystem:n,onUpdate:l,onBulkUpdate:s,onMoveUp:o,onMoveDown:c,onRemove:i,canMoveUp:m,canMoveDown:d,heatLockEnabled:g,aRelayOnly:u,teamPlaceLimitEnabled:p,isCollapsed:b,onToggle:y})=>{const h="diving"===getEventType(e),x="relay"===getEventType(e),v=t=>{const a=[];return e.results.forEach(e=>{e.teamIds&&e.teamIds.includes(String(t))&&a.push(e.place)}),a.sort((e,t)=>e-t)},f=e=>1===e?"1st":2===e?"2nd":3===e?"3rd":`${e}th`,E=t=>{const a=e.results.find(e=>e.place===t);return a?.teamIds||[]},R=e=>{for(let t=1;t<e;t++){const a=E(t);if(a.length>1&&e<=t+a.length-1)return!0}return!1};return React.createElement("div",{className:"rounded-xl "+(a?"bg-pool-mid/80 border border-white/10":"bg-white border border-slate-200 shadow-sm")},React.createElement("button",{type:"button",onClick:y,className:"w-full flex items-center justify-between px-3 py-2 cursor-pointer transition rounded-xl "+(a?"hover:bg-white/5":"hover:bg-slate-50"),"aria-expanded":!b},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("h4",{className:"font-semibold text-base "+(a?"text-white":"text-slate-800")},React.createElement("span",{className:"girls"===e.gender?a?"text-pink-400":"text-pink-600":a?"text-blue-400":"text-blue-600"},"girls"===e.gender?"G":"B")," ",React.createElement("span",{className:h?a?"text-orange-400":"text-orange-600":""},e.name)),g&&!x&&!h&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 rounded-full whitespace-nowrap "+(a?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-amber-100 text-amber-700 border border-amber-200")},"ðŸ”’ A/B Finals"),u&&x&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 rounded-full whitespace-nowrap "+(a?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-teal-100 text-teal-700 border border-teal-200")},"ðŸ…°ï¸ Relay Only")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(ChevronDown,{className:`w-5 h-5 transition-transform ${a?"text-slate-400":"text-slate-500"} ${b?"":"rotate-180"}`}))),!b&&React.createElement("div",{className:"px-3 pb-3"},React.createElement("div",{className:"flex items-center justify-between mb-2"},2===t.length&&(()=>{const n=v(t[0].id),l=v(t[1].id),o=n.length>0&&0===l.length||0===n.length&&l.length>0,c=n.length>0?t[1]:t[0],i=n.length>0?n:l;return o?React.createElement("button",{onClick:t=>{t.stopPropagation(),triggerHaptic("light");const a=[...e.results||[]];for(let e=1;e<=r;e++)if(!i.includes(e)&&!R(e)){const t=a.findIndex(t=>t&&t.place===e);if(t>=0){const r=[...a[t].teamIds||[]];r.includes(String(c.id))||r.push(String(c.id)),a[t]={place:e,teamIds:r}}else a.push({place:e,teamIds:[String(c.id)]})}s(e.id,a)},className:"text-xs px-2 py-1 rounded-full font-medium transition "+(a?"bg-chlorine/20 text-chlorine border border-chlorine/30 hover:bg-chlorine/30":"bg-cyan-100 text-cyan-700 border border-cyan-200 hover:bg-cyan-200")},"Auto-fill ",c.name):React.createElement("div",null)})(),2!==t.length&&React.createElement("div",null),React.createElement("div",{className:"flex items-center gap-1"},React.createElement("button",{onClick:e=>{e.stopPropagation(),o()},disabled:!m,"aria-label":"Move event up",className:`p-1 rounded ${m?a?"hover:bg-white/10":"hover:bg-slate-100":"opacity-30 cursor-not-allowed"} ${a?"text-slate-400":"text-slate-500"}`},React.createElement(ChevronUp,{className:"w-4 h-4"})),React.createElement("button",{onClick:e=>{e.stopPropagation(),c()},disabled:!d,"aria-label":"Move event down",className:`p-1 rounded ${d?a?"hover:bg-white/10":"hover:bg-slate-100":"opacity-30 cursor-not-allowed"} ${a?"text-slate-400":"text-slate-500"}`},React.createElement(ChevronDown,{className:"w-4 h-4"})),React.createElement("button",{onClick:e=>{e.stopPropagation(),i()},"aria-label":"Remove event",className:"p-1 rounded "+(a?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50")},React.createElement(X,{className:"w-4 h-4"})))),React.createElement("div",{className:"space-y-2"},t.map(t=>{const s=v(t.id),o=g&&!x&&!h&&r>10,c=(()=>{if(0===s.length)return 0;let e=0;const a=p&&x,l=a?Math.max(1,r-1):r,o={},c={};for(let e=1;e<=r;e++){const t=E(e);t.length>0&&(c[e]=t)}let i=1;for(;i<=r;){const s=c[i];if(s&&s.length>0){const c=s.length,m=s.filter(e=>!a||(o[e]||0)<l);if(m.forEach(e=>{o[e]=(o[e]||0)+1}),m.includes(String(t.id))){let t=0;for(let e=0;e<m.length&&i+e<=r;e++)t+=n[i+e]||0;e+=t/m.length}i+=c}else i++}return Math.round(10*e)/10})();return React.createElement("div",{key:t.id},React.createElement("div",{className:"flex items-center gap-2 mb-1"},React.createElement("div",{className:"text-xs font-medium truncate "+(a?"text-gray-300":"text-gray-700")},t.name),c>0&&React.createElement("div",{className:"text-xs font-medium "+(a?"text-chlorine":"text-cyan-600")},c,"pt")),React.createElement("div",{className:"flex gap-1 flex-wrap"},Array.from({length:r},(e,t)=>t+1).map(r=>{const c=s.includes(r),i=E(r),m=i.length>1,d=i.some(e=>e!==String(t.id)),g=R(r)&&!c,u=n[r]||0,p=o&&r>=9&&r<=16,b=p?r-8:null;return g?React.createElement("div",{key:r,className:"w-8 h-8 sm:w-9 sm:h-9 rounded flex items-center justify-center text-xs opacity-30 "+(a?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-400"),title:"Consumed by tie above"},"-"):React.createElement("button",{key:r,onClick:()=>((t,a)=>{triggerHaptic("light");const r=v(t).includes(a);l(e.id,a,t,!r)})(t.id,r),className:`${p?"w-10 h-8 sm:w-11 sm:h-9":"w-8 h-8 sm:w-9 sm:h-9"} rounded font-medium text-xs transition-all ${c?1===r?"bg-gradient-to-br from-amber-400 to-amber-500 text-amber-900":2===r?"bg-gradient-to-br from-gray-300 to-gray-400 text-gray-800":3===r?"bg-gradient-to-br from-orange-400 to-orange-500 text-orange-900":a?"bg-chlorine text-pool-deep":"bg-cyan-600 text-white":d?a?"bg-gray-600/50 text-gray-400 border border-dashed border-gray-500":"bg-gray-100 text-gray-400 border border-dashed border-gray-300":a?"bg-gray-700/50 text-gray-400 hover:bg-gray-600 border border-gray-600":"bg-gray-50 text-gray-500 hover:bg-gray-100 border border-gray-200"} ${m&&c?"ring-2 ring-yellow-400":""}`,title:`${f(r)} (${u}pts)${p?` - B Finals ${b}${1===b?"st":2===b?"nd":3===b?"rd":"th"}`:""}${d&&!c?" - taken":""}`},p?React.createElement("span",{className:"flex flex-col items-center leading-none"},React.createElement("span",null,r),React.createElement("span",{className:"text-[9px] leading-none "+(c?"":a?"text-amber-400":"text-amber-600")},"H1:",b)):r)})))}))))},BulkEntryModal=({event:e,teams:t,darkMode:a,numPlaces:r,pointSystem:n,onSave:l,onClose:s,existingResults:o})=>{const[c,i]=useState(()=>{const e={};return t.forEach(t=>{e[t.id]=[]}),o&&o.forEach(t=>{t.teamIds&&t.place&&t.teamIds.forEach(a=>{e[a]&&e[a].push(t.place)})}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>e-t)}),e}),[m,d]=useState(t[0]?.id||null),[g,u]=useState(2===t.length);useEffect(()=>{u(2===t.length),d(t[0]?.id||null),i(e=>{const a={};return t.forEach(t=>{a[t.id]=e[t.id]||[]}),a})},[t.map(e=>e.id).join(",")]);const p=c[m]||[],b=e=>1===e?"1st":2===e?"2nd":3===e?"3rd":`${e}th`,y=()=>{let e=0;return Object.values(c).forEach(t=>{e+=t.length}),e};return React.createElement("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-2 sm:p-4"},React.createElement("div",{className:"rounded-2xl w-full max-w-lg flex flex-col "+(a?"bg-pool-mid border border-chlorine/30":"bg-white"),style:{maxHeight:"calc(100vh - 16px)"}},React.createElement("div",{className:"px-4 py-3 flex items-center justify-between border-b shrink-0 "+(a?"bg-gradient-to-r from-chlorine/20 to-transparent border-chlorine/20":"bg-gradient-to-r from-cyan-500 to-blue-500")},React.createElement("div",{className:"flex items-center gap-2"},React.createElement(Zap,{className:"w-5 h-5 "+(a?"text-chlorine":"text-white")}),React.createElement("div",null,React.createElement("h3",{className:"text-base font-bold "+(a?"text-chlorine":"text-white")},"Team Mode Entry"),React.createElement("p",{className:"text-xs "+(a?"text-gray-400":"text-white/80")},"girls"===e.gender?"Girls":"Boys"," ",e.name))),React.createElement("button",{onClick:s,className:"p-2 rounded-lg transition "+(a?"hover:bg-white/10":"hover:bg-white/20")},React.createElement(X,{className:"w-5 h-5 "+(a?"text-gray-300":"text-white")}))),React.createElement("div",{className:"flex-1 overflow-y-auto p-4"},React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"grid gap-2 "+(t.length<=2||t.length<=4?"grid-cols-2":"grid-cols-3")},t.map(e=>{const t=(r=e.id,(c[r]||[]).length);var r;return React.createElement("button",{key:e.id,onClick:()=>{d(e.id),triggerHaptic("light")},className:"px-3 py-2 rounded-xl font-medium text-sm transition-all "+(m===e.id?a?"bg-chlorine text-pool-deep ring-2 ring-chlorine/50":"bg-cyan-600 text-white ring-2 ring-cyan-300":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200")},React.createElement("span",{className:"truncate"},e.name),t>0&&React.createElement("span",{className:"ml-1 text-xs "+(m===e.id?"opacity-80":a?"text-gray-400":"text-gray-500")},"(",t,")"))}))),React.createElement("div",{className:"mb-3"},React.createElement("div",{className:"flex items-center justify-between mb-2"},React.createElement("span",{className:"text-xs "+(a?"text-gray-400":"text-gray-500")},"Tap places for ",t.find(e=>e.id===m)?.name),React.createElement("button",{onClick:()=>{triggerHaptic("light"),i(e=>({...e,[m]:[]}))},className:"text-xs px-2 py-0.5 rounded "+(a?"text-gray-400 hover:text-gray-300 hover:bg-gray-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100")},"Clear")),React.createElement("div",{className:"grid grid-cols-5 gap-1.5"},Array.from({length:r},(e,t)=>t+1).map(e=>{const r=p.includes(e),l=(e=>{const t=[];return Object.entries(c).forEach(([a,r])=>{r.includes(e)&&t.push(a)}),t})(e),s=l.some(e=>e!==String(m)),o=l.length>1,d=n[e]||0;return React.createElement("button",{key:e,onClick:()=>(e=>{triggerHaptic("light"),i(t=>{const a=[...t[m]||[]],r=a.indexOf(e);return r>=0?a.splice(r,1):(a.push(e),a.sort((e,t)=>e-t)),{...t,[m]:a}})})(e),className:`relative p-2 rounded-lg font-medium text-center transition-all ${r?1===e?"bg-gradient-to-br from-amber-400 to-amber-500 text-amber-900 ring-2 ring-amber-300":2===e?"bg-gradient-to-br from-gray-300 to-gray-400 text-gray-800 ring-2 ring-gray-300":3===e?"bg-gradient-to-br from-orange-400 to-orange-500 text-orange-900 ring-2 ring-orange-300":a?"bg-chlorine text-pool-deep ring-2 ring-chlorine/50":"bg-cyan-600 text-white ring-2 ring-cyan-300":s?a?"bg-gray-600 text-gray-300 border-2 border-dashed border-gray-500":"bg-gray-200 text-gray-600 border-2 border-dashed border-gray-400":a?"bg-gray-700/50 text-gray-400 hover:bg-gray-600 border border-gray-600":"bg-gray-50 text-gray-600 hover:bg-gray-100 border border-gray-200"} ${o?"ring-2 ring-yellow-400":""}`},r&&React.createElement("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-green-500 rounded-full flex items-center justify-center"},React.createElement(Check,{className:"w-2.5 h-2.5 text-white"})),o&&React.createElement("div",{className:"absolute -top-1 -left-1 w-3.5 h-3.5 bg-yellow-500 rounded-full flex items-center justify-center text-[9px] font-bold text-yellow-900"},l.length),React.createElement("div",{className:"text-sm font-bold"},b(e)),React.createElement("div",{className:"text-xs "+(r?"text-white/80":a?"text-gray-500":"text-gray-400")},d,"pt"),s&&!r&&React.createElement("div",{className:"text-[9px] leading-tight truncate "+(a?"text-gray-400":"text-gray-500")},t.find(e=>l.includes(String(e.id))&&e.id!==m)?.name?.slice(0,6)))}))),2===t.length&&React.createElement("div",{className:"p-3 rounded-xl mb-3 "+(a?"bg-lane-gold/10 border border-lane-gold/30":"bg-amber-50 border border-amber-200")},React.createElement("label",{className:"flex items-center gap-2 cursor-pointer"},React.createElement("input",{type:"checkbox",id:"auto-fill-toggle",name:"auto-fill-toggle",checked:g,onChange:e=>{u(e.target.checked),triggerHaptic("light")},className:"w-4 h-4 rounded accent-amber-500"}),React.createElement("span",{className:"text-sm font-medium "+(a?"text-lane-gold":"text-amber-700")},"Auto-fill remaining to ",t.find(e=>e.id!==m)?.name))),React.createElement("div",{className:"p-3 rounded-xl "+(a?"bg-gray-800/50":"bg-gray-50")},React.createElement("div",{className:"space-y-1.5 text-sm"},t.map(e=>{const t=c[e.id]||[];return 0===t.length?null:React.createElement("div",{key:e.id,className:"flex items-center justify-between"},React.createElement("span",{className:""+(e.id===m?a?"text-chlorine font-medium":"text-cyan-600 font-medium":a?"text-gray-400":"text-gray-500")},e.name,":"),React.createElement("span",{className:"font-medium "+(a?"text-white":"text-gray-800")},t.map(e=>b(e)).join(", ")))}),0===y()&&React.createElement("div",{className:"text-center "+(a?"text-gray-500":"text-gray-400")},"No places selected")))),React.createElement("div",{className:"px-4 py-3 border-t flex gap-2 shrink-0 "+(a?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200")},React.createElement("button",{onClick:s,className:"flex-1 py-2.5 rounded-xl font-semibold transition text-sm "+(a?"bg-gray-700 hover:bg-gray-600 text-gray-300":"bg-gray-200 hover:bg-gray-300 text-gray-700")},"Cancel"),React.createElement("button",{onClick:()=>{const a=[],n={};if(Object.entries(c).forEach(([e,t])=>{t.forEach(t=>{n[t]||(n[t]=[]),n[t].push(String(e))})}),g&&2===t.length){const[e,a]=t;for(let t=1;t<=r;t++)if(!n[t]||0===n[t].length){const r=(c[e.id]||[]).includes(t),l=(c[a.id]||[]).includes(t);if(!r&&!l){const r=(c[e.id]||[]).length,l=(c[a.id]||[]).length;n[t]=[String(r<=l?e.id:a.id)]}}}Object.entries(n).forEach(([e,t])=>{t.length>0&&a.push({place:parseInt(e),teamIds:t})}),l(e.id,a),s(),trackEvent("bulk_entry_save",{team_count:t.length,places_selected:y(),auto_fill:g}),triggerHaptic("medium")},disabled:0===y(),className:"flex-1 py-2.5 rounded-xl font-semibold transition flex items-center justify-center gap-1.5 text-sm "+(0===y()?a?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed":a?"bg-chlorine hover:bg-chlorine-glow text-pool-deep":"bg-cyan-600 hover:bg-cyan-700 text-white")},React.createElement(Check,{className:"w-4 h-4"}),"Apply (",y(),")"))))};function SwimMeetScore(){const[e,t]=useState(null),[a,r]=useState(null),[n,l]=useState(null),[s,o]=useState(null),[c,i]=useState(!1);useEffect(()=>{if(e){const e=setTimeout(()=>t(null),5e3);return()=>clearTimeout(e)}},[e]),useEffect(()=>{if(a){const e=setTimeout(()=>r(null),6e3);return()=>clearTimeout(e)}},[a]),useEffect(()=>{const e=e=>{N(e)};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),useEffect(()=>{const e=()=>{k(!1),T(!1)},t=()=>k(!0);window.addEventListener("online",e),window.addEventListener("offline",t);const a=()=>{navigator.onLine?fetch("/favicon.ico",{method:"HEAD",cache:"no-store"}).then(()=>{k(!1),T(!1)}).catch(()=>k(!0)):k(!0)};let r;return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&(r=setInterval(a,3e4)),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),r&&clearInterval(r)}},[]);const m=[{id:"1",name:"Home Team",score:0,girlsScore:0,boysScore:0},{id:"2",name:"Away Team",score:0,girlsScore:0,boysScore:0}],d=[{id:"1",name:"200 Medley Relay",type:"relay",results:[],gender:"girls"},{id:"2",name:"200 Medley Relay",type:"relay",results:[],gender:"boys"},{id:"3",name:"200 Freestyle",type:"individual",results:[],gender:"girls"},{id:"4",name:"200 Freestyle",type:"individual",results:[],gender:"boys"},{id:"5",name:"200 IM",type:"individual",results:[],gender:"girls"},{id:"6",name:"200 IM",type:"individual",results:[],gender:"boys"},{id:"7",name:"50 Freestyle",type:"individual",results:[],gender:"girls"},{id:"8",name:"50 Freestyle",type:"individual",results:[],gender:"boys"},{id:"9",name:"Diving",type:"diving",results:[],gender:"girls"},{id:"10",name:"Diving",type:"diving",results:[],gender:"boys"},{id:"11",name:"100 Butterfly",type:"individual",results:[],gender:"girls"},{id:"12",name:"100 Butterfly",type:"individual",results:[],gender:"boys"},{id:"13",name:"100 Freestyle",type:"individual",results:[],gender:"girls"},{id:"14",name:"100 Freestyle",type:"individual",results:[],gender:"boys"},{id:"15",name:"500 Freestyle",type:"individual",results:[],gender:"girls"},{id:"16",name:"500 Freestyle",type:"individual",results:[],gender:"boys"},{id:"17",name:"200 Freestyle Relay",type:"relay",results:[],gender:"girls"},{id:"18",name:"200 Freestyle Relay",type:"relay",results:[],gender:"boys"},{id:"19",name:"100 Backstroke",type:"individual",results:[],gender:"girls"},{id:"20",name:"100 Backstroke",type:"individual",results:[],gender:"boys"},{id:"21",name:"100 Breaststroke",type:"individual",results:[],gender:"girls"},{id:"22",name:"100 Breaststroke",type:"individual",results:[],gender:"boys"},{id:"23",name:"400 Freestyle Relay",type:"relay",results:[],gender:"girls"},{id:"24",name:"400 Freestyle Relay",type:"relay",results:[],gender:"boys"}],g={1:6,2:4,3:3,4:2,5:1,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},u={1:8,2:4,3:2,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},p={1:5,2:3,3:1,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0},APP_VERSION="1.5.3",[b,y]=useState(()=>{const e=utils.loadFromStorage("teams",m);return Array.isArray(e)&&0!==e.length?e.map(e=>e?{...e,id:String(e.id)}:e):m}),[h,x]=useState(()=>(()=>{try{const e=utils.loadFromStorage("version",1),t=utils.loadFromStorage("events",null);if(e<3||!t||!Array.isArray(t))return utils.saveToStorage("version",4),d;let a=t.filter(e=>e&&e.id&&e.name&&Array.isArray(e.results)).map(e=>({...e,id:String(e.id),type:e.type||getEventType(e)}));return e<4&&(a=a.map(e=>({...e,results:(e.results||[]).map(e=>e.teamIds&&Array.isArray(e.teamIds)?e:e.teamId?{place:e.place,teamIds:[String(e.teamId)]}:e).filter(e=>e&&e.place&&e.teamIds&&e.teamIds.length>0)})),utils.saveToStorage("version",4),utils.saveToStorage("events",a)),a.length>0?a:d}catch(e){return console.error("Error initializing events:",e),d}})()),[v,f]=useState(!1),[E,R]=useState(!1),[w,N]=useState(null),[S,k]=useState(!navigator.onLine),[C,T]=useState(!1),[P,M]=useState(""),[I,A]=useState(()=>utils.loadFromStorage("darkMode",!0)),[L,j]=useState(()=>utils.loadFromStorage("scoringMode","combined")),[F,B]=useState(()=>{const e=utils.loadFromStorage("numIndividualPlaces",5);return utils.validateNumber(e,1,20,5)}),[D,O]=useState(()=>{const e=utils.loadFromStorage("numRelayPlaces",3);return utils.validateNumber(e,1,20,3)}),[$,H]=useState(()=>{const e=utils.loadFromStorage("numDivingPlaces",3);return utils.validateNumber(e,1,20,3)}),[_,U]=useState(null),[W,z]=useState(""),[V,G]=useState(null),[q,J]=useState(""),[Q,Y]=useState(""),[K,Z]=useState("girls"),[ee,te]=useState("individual"),[ae,re]=useState(()=>{const e=utils.loadFromStorage("savedTemplates",[]);return Array.isArray(e)?e:[]}),[ne,le]=useState(""),[se,oe]=useState(!1),[ce,ie]=useState(null),[me,de]=useState(!1),[ge,ue]=useState(()=>{const e=utils.loadFromStorage("savedMeets",[]);return Array.isArray(e)?e:[]}),[pe,be]=useState(!1),ye=useRef(null),[he,xe]=useState(()=>utils.loadFromStorage("heatLockEnabled",!1)),[ve,fe]=useState(()=>utils.loadFromStorage("aRelayOnly",!1)),[Ee,Re]=useState(()=>utils.loadFromStorage("teamPlaceLimitEnabled",!0)),we=useRef([]),Ne=useRef([]),[Se,ke]=useState(!1),[Ce,Te]=useState(!1),Pe=useRef(b),Me=useRef(h);useEffect(()=>{Pe.current=b},[b]),useEffect(()=>{Me.current=h},[h]);const[Ie,Ae]=useState(()=>utils.loadFromStorage("activeTemplate","high_school")),[Le,je]=useState(()=>{const e=utils.loadFromStorage("collapsedSections",null);return e&&"object"==typeof e?e:{"manage-teams":!0,"scoring-templates":!0,"special-scoring":!0,"scoring-places":!0,"data-management":!0,"point-systems":!0,appearance:!0,"export-share":!0,"meet-history":!0}}),Fe=e=>{je(t=>{const a={...t,[e]:!t[e]};return utils.saveToStorage("collapsedSections",a),a})},Be=e=>{const t={};return Array.isArray(e)&&e.forEach((e,a)=>{t[e.id]=0!==a}),t},[De,Oe]=useState(()=>{const e=utils.loadFromStorage("events",d);return Be(e)}),$e=e=>{Oe(t=>({...t,[e]:!t[e]}))},[He,_e]=useState(()=>{const e=utils.loadFromStorage("individualPointSystem",g);return e&&"object"==typeof e?e:g}),[Ue,We]=useState(()=>{const e=utils.loadFromStorage("relayPointSystem",u);return e&&"object"==typeof e?e:u}),[ze,Ve]=useState(()=>{const e=utils.loadFromStorage("divingPointSystem",p);return e&&"object"==typeof e?e:p}),Ge=useRef(null),qe=useRef(null);useEffect(()=>{Ge.current=utils.debounce(e=>{utils.saveToStorage("teams",e)||t("Failed to save teams. Storage may be full or unavailable.")},500),qe.current=utils.debounce(e=>{utils.saveToStorage("events",e)||t("Failed to save events. Storage may be full or unavailable.")},500)},[]),useEffect(()=>{b&&Array.isArray(b)&&Ge.current&&Ge.current(b)},[b]),useEffect(()=>{h&&Array.isArray(h)&&qe.current&&qe.current(h)},[h]),useEffect(()=>{utils.saveToStorage("darkMode",I)},[I]),useEffect(()=>{utils.saveToStorage("scoringMode",L)},[L]),useEffect(()=>{utils.saveToStorage("numIndividualPlaces",F)},[F]),useEffect(()=>{utils.saveToStorage("numRelayPlaces",D)},[D]),useEffect(()=>{utils.saveToStorage("numDivingPlaces",$)},[$]),useEffect(()=>{ae&&Array.isArray(ae)&&utils.saveToStorage("savedTemplates",ae)},[ae]),useEffect(()=>{He&&"object"==typeof He&&utils.saveToStorage("individualPointSystem",He)},[He]),useEffect(()=>{Ue&&"object"==typeof Ue&&utils.saveToStorage("relayPointSystem",Ue)},[Ue]),useEffect(()=>{ze&&"object"==typeof ze&&utils.saveToStorage("divingPointSystem",ze)},[ze]),useEffect(()=>{utils.saveToStorage("heatLockEnabled",he)},[he]),useEffect(()=>{utils.saveToStorage("aRelayOnly",ve)},[ve]),useEffect(()=>{utils.saveToStorage("teamPlaceLimitEnabled",Ee)},[Ee]),useEffect(()=>{utils.saveToStorage("activeTemplate",Ie)},[Ie]),useEffect(()=>{const e=e=>{if(!e.key||!e.key.startsWith("swimMeetScore_")||null===e.newValue)return;const t=e.key.replace("swimMeetScore_","");try{const a=JSON.parse(e.newValue);"teams"===t&&Array.isArray(a)?y(a):"events"===t&&Array.isArray(a)?x(a):"darkMode"===t?A(a):"scoringMode"===t?j(a):"heatLockEnabled"===t?xe(a):"aRelayOnly"===t&&fe(a)}catch(e){}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),useEffect(()=>{if(ve&&b.length>0){const e=Math.min(b.length,20);D!==e&&O(e)}},[ve,b.length]);const Je=useCallback((e,a)=>{if(Array.isArray(e)&&Array.isArray(a))try{const t=window.ScoringLib.calculateScores({teams:e,events:a,individualPointSystem:He,relayPointSystem:Ue,divingPointSystem:ze,numIndividualPlaces:F,numRelayPlaces:D,numDivingPlaces:$,teamPlaceLimitEnabled:Ee});y(e.map(e=>({...e,score:t[e.id]&&t[e.id].score||0,girlsScore:t[e.id]&&t[e.id].girlsScore||0,boysScore:t[e.id]&&t[e.id].boysScore||0})))}catch(e){console.error("Error recalculating scores:",e),t("Error calculating scores. Please refresh the page.")}},[He,Ue,ze,F,D,$,Ee]),Qe=useCallback(e=>{try{we.current.push({label:e||"action",teams:JSON.parse(JSON.stringify(Pe.current)),events:JSON.parse(JSON.stringify(Me.current))}),we.current.length>50&&we.current.shift(),Ne.current=[],ke(!0),Te(!1)}catch(e){console.error("Error saving undo snapshot:",e)}},[]),Ye=useCallback(()=>{if(0!==we.current.length)try{Ne.current.push({teams:JSON.parse(JSON.stringify(Pe.current)),events:JSON.parse(JSON.stringify(Me.current))});const e=we.current.pop();y(e.teams),x(e.events),Je(e.teams,e.events),ke(we.current.length>0),Te(!0),trackEvent("undo",{label:e.label})}catch(e){console.error("Error performing undo:",e),t("Failed to undo. Please try again.")}},[Je]),Ke=useCallback(()=>{if(0!==Ne.current.length)try{we.current.push({label:"redo",teams:JSON.parse(JSON.stringify(Pe.current)),events:JSON.parse(JSON.stringify(Me.current))});const e=Ne.current.pop();y(e.teams),x(e.events),Je(e.teams,e.events),ke(!0),Te(Ne.current.length>0),trackEvent("redo")}catch(e){console.error("Error performing redo:",e),t("Failed to redo. Please try again.")}},[Je]);useEffect(()=>{const e=e=>{!e.ctrlKey&&!e.metaKey||"z"!==e.key||e.shiftKey?(e.ctrlKey||e.metaKey)&&("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),Ke()):(e.preventDefault(),Ye())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[Ye,Ke]);const Xe=()=>{const e=utils.validateTeamName(P);if(!e.valid)return void t(e.error);const a=e.value;if(b.some(e=>e.name.toLowerCase()===a.toLowerCase()))t("A team with this name already exists.");else if(b.length>=50)t("Maximum of 50 teams allowed.");else try{y([...b,{id:utils.generateId(),name:a,score:0,girlsScore:0,boysScore:0}]),M(""),t(null),trackEvent("add_team",{team_count:b.length+1})}catch(e){console.error("Error adding team:",e),t("Failed to add team. Please try again.")}},Ze=e=>{const a=utils.validateTeamName(W);if(!a.valid)return void t(a.error);const r=a.value;if(b.some(t=>t.id!==e&&t.name.toLowerCase()===r.toLowerCase()))t("A team with this name already exists.");else try{const a=b.map(t=>t.id===e?{...t,name:r}:t);y(a),U(null),z(""),t(null)}catch(e){console.error("Error saving team name:",e),t("Failed to save team name. Please try again.")}},et=e=>{const a=utils.validateTeamName(q);if(!a.valid)return void t(a.error);if(b.find(t=>t.id!==e&&t.name.toLowerCase()===q.trim().toLowerCase()))t("A team with this name already exists.");else try{y(b.map(t=>t.id===e?{...t,name:q.trim()}:t)),G(null),J(""),t(null)}catch(e){console.error("Error saving team name:",e),t("Failed to save team name. Please try again.")}},tt=()=>{G(null),J("")},at=()=>{const e=utils.validateEventName(Q,ee);if(e.valid)if(h.length>=100)t("Maximum of 100 events allowed.");else try{let a;a="diving"===ee?"Diving":"relay"===ee?`${e.value} Relay`:e.value,x([...h,{id:utils.generateId(),name:a,type:ee,results:[],gender:K}]),Y(""),t(null),trackEvent("add_event",{event_type:ee,event_count:h.length+1})}catch(e){console.error("Error adding event:",e),t("Failed to add event. Please try again.")}else t(e.error)},rt=e=>{l({message:"Are you sure you want to delete this event? All results for this event will be lost.",onConfirm:()=>{try{Qe("remove event");const t=h.filter(t=>t&&t.id!==e);x(t),Je(b,t),l(null)}catch(e){console.error("Error removing event:",e),t("Failed to remove event. Please try again."),l(null)}},onCancel:()=>l(null)})},nt=e=>{if(0===e)return;const t=[...h];[t[e-1],t[e]]=[t[e],t[e-1]],x(t)},lt=e=>{if(e===h.length-1)return;const t=[...h];[t[e],t[e+1]]=[t[e+1],t[e]],x(t)},st=()=>{const e=utils.validateTemplateName(ne);if(!e.valid)return void t(e.error);const a=e.value;if(ae.some(e=>e.name.toLowerCase()===a.toLowerCase()))t("A template with this name already exists.");else if(ae.length>=20)t("Maximum of 20 templates allowed.");else try{const e={id:utils.generateId(),name:a,numIndividualPlaces:F,numRelayPlaces:D,numDivingPlaces:$,individualPointSystem:{...He},relayPointSystem:{...Ue},divingPointSystem:{...ze},heatLockEnabled:he,aRelayOnly:ve,teamPlaceLimitEnabled:Ee,events:h.map(e=>e?{name:e.name,type:e.type||getEventType(e),gender:e.gender}:null).filter(Boolean),teams:b.map(e=>e?{name:e.name}:null).filter(Boolean)};re([...ae,e]),le(""),oe(!1),t(null)}catch(e){console.error("Error saving template:",e),t("Failed to save template. Please try again.")}},ot=e=>t=>{Ae(null),e(t)},ct=(e,a,n,l)=>{try{if(!e||!a||a<1)return;if(n&&!b.some(e=>e&&e.id===String(n)))return;Qe("update result");const s=h.find(t=>t&&t.id===e);if(!s)return;const o="relay"===getEventType(s);if(l&&n&&Ee&&o){const e=Math.max(1,D-1);let r=0;if((s.results||[]).forEach(e=>{e&&e.teamIds&&e.teamIds.includes(String(n))&&e.place!==a&&r++}),r>=e)return t(React.createElement("span",null,"Team limit reached: A team can only occupy ",e," of ",D," relay places. ",React.createElement("button",{onClick:()=>{t(null),f(!0),je(e=>{const t={...e,"special-scoring":!1};return utils.saveToStorage("collapsedSections",t),t}),window.scrollTo({top:0,behavior:"smooth"})},className:"underline font-semibold hover:opacity-80"},"Change in Settings"))),void triggerHaptic("heavy")}const c=h.map(t=>{if(t&&t.id===e){const e=[...t.results||[]],r=e.findIndex(e=>e&&e.place===a);if(r>=0){const t=[...e[r].teamIds||[]];if(l&&n)t.includes(String(n))||t.push(String(n));else if(!l&&n){const e=t.indexOf(String(n));e>=0&&t.splice(e,1)}0===t.length?e.splice(r,1):e[r]={place:a,teamIds:t}}else l&&n&&e.push({place:a,teamIds:[String(n)]});return{...t,results:e}}return t});x(c),Je(b,c),l&&n&&(trackEvent("record_result",{place:a}),triggerHaptic("light"));const i="diving"===getEventType(s);if(l&&n&&he&&!o&&!i&&F>10&&a>=1&&a<=8){const t=c.find(t=>t.id===e);if(t){(t.results||[]).some(e=>e.place>=9&&e.place<=16&&e.teamIds&&e.teamIds.length>0)||r(`Don't forget to score Heat 1 (B Finals) in places 9thâ€“16th for ${t.name}.`)}}}catch(e){console.error("Error updating event result:",e),t("Failed to update result. Please try again.")}},it=(e,a)=>{try{if(!e)return;Qe("bulk update results");const t=h.map(t=>t&&t.id===e?{...t,results:a}:t);x(t),Je(b,t)}catch(e){console.error("Error bulk updating event results:",e),t("Failed to update results. Please try again.")}};useEffect(()=>{Je(b,h)},[L]);const mt=useMemo(()=>Array.isArray(b)&&0!==b.length?[...b].sort((e,t)=>e&&t?"girls"===L?(t.girlsScore||0)-(e.girlsScore||0):"boys"===L?(t.boysScore||0)-(e.boysScore||0):(t.score||0)-(e.score||0):0):[],[b,L]),dt=e=>{if(!e||!e.name)return[];const t="diving"===getEventType(e),a="relay"===getEventType(e),r=t?$:a?D:F;return Array.from({length:r},(e,t)=>t+1)},gt=e=>{const t=new Set;if(!e||!e.results)return t;const a="diving"===getEventType(e),r="relay"===getEventType(e),n=a?$:r?D:F;return[...e.results].filter(e=>e&&e.place&&e.teamIds&&e.teamIds.length>0).sort((e,t)=>e.place-t.place).forEach(e=>{const a=e.teamIds.length;if(a>1)for(let r=1;r<a&&e.place+r<=n;r++)t.add(e.place+r)}),t},ut=[{name:"200 Medley Relay",type:"relay",gender:"girls"},{name:"200 Medley Relay",type:"relay",gender:"boys"},{name:"200 Freestyle",type:"individual",gender:"girls"},{name:"200 Freestyle",type:"individual",gender:"boys"},{name:"200 IM",type:"individual",gender:"girls"},{name:"200 IM",type:"individual",gender:"boys"},{name:"50 Freestyle",type:"individual",gender:"girls"},{name:"50 Freestyle",type:"individual",gender:"boys"},{name:"Diving",type:"diving",gender:"girls"},{name:"Diving",type:"diving",gender:"boys"},{name:"100 Butterfly",type:"individual",gender:"girls"},{name:"100 Butterfly",type:"individual",gender:"boys"},{name:"100 Freestyle",type:"individual",gender:"girls"},{name:"100 Freestyle",type:"individual",gender:"boys"},{name:"500 Freestyle",type:"individual",gender:"girls"},{name:"500 Freestyle",type:"individual",gender:"boys"},{name:"200 Freestyle Relay",type:"relay",gender:"girls"},{name:"200 Freestyle Relay",type:"relay",gender:"boys"},{name:"100 Backstroke",type:"individual",gender:"girls"},{name:"100 Backstroke",type:"individual",gender:"boys"},{name:"100 Breaststroke",type:"individual",gender:"girls"},{name:"100 Breaststroke",type:"individual",gender:"boys"},{name:"400 Freestyle Relay",type:"relay",gender:"girls"},{name:"400 Freestyle Relay",type:"relay",gender:"boys"}],pt=[{name:"200 Medley Relay",type:"relay",gender:"girls"},{name:"200 Medley Relay",type:"relay",gender:"boys"},{name:"200 Freestyle",type:"individual",gender:"girls"},{name:"200 Freestyle",type:"individual",gender:"boys"},{name:"200 IM",type:"individual",gender:"girls"},{name:"200 IM",type:"individual",gender:"boys"},{name:"50 Freestyle",type:"individual",gender:"girls"},{name:"50 Freestyle",type:"individual",gender:"boys"},{name:"Diving",type:"diving",gender:"girls"},{name:"Diving",type:"diving",gender:"boys"},{name:"100 Butterfly",type:"individual",gender:"girls"},{name:"100 Butterfly",type:"individual",gender:"boys"},{name:"100 Freestyle",type:"individual",gender:"girls"},{name:"100 Freestyle",type:"individual",gender:"boys"},{name:"500 Freestyle",type:"individual",gender:"girls"},{name:"500 Freestyle",type:"individual",gender:"boys"},{name:"200 Freestyle Relay",type:"relay",gender:"girls"},{name:"200 Freestyle Relay",type:"relay",gender:"boys"},{name:"100 Backstroke",type:"individual",gender:"girls"},{name:"100 Backstroke",type:"individual",gender:"boys"},{name:"100 Breaststroke",type:"individual",gender:"girls"},{name:"100 Breaststroke",type:"individual",gender:"boys"},{name:"400 Freestyle Relay",type:"relay",gender:"girls"},{name:"400 Freestyle Relay",type:"relay",gender:"boys"}],bt={4:{individual:[5,3,2,1],relay:[10,6,4,2]},5:{individual:[6,4,3,2,1],relay:[12,8,6,4,2]},6:{individual:[7,5,4,3,2,1],relay:[14,10,8,6,4,2]},7:{individual:[8,6,5,4,3,2,1],relay:[16,12,10,8,6,4,2]},8:{individual:[9,7,6,5,4,3,2,1],relay:[18,14,12,10,8,6,4,2]},9:{individual:[10,8,7,6,5,4,3,2,1],relay:[20,16,14,12,10,8,6,4,2]},10:{individual:[11,9,8,7,6,5,4,3,2,1],relay:[22,18,16,14,12,10,8,6,4,2]}},yt=()=>({modeLabel:"combined"===L?"":"girls"===L?" (Girls Only)":" (Boys Only)",sortedTeams:[...b].sort((e,t)=>{const a="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score;return("girls"===L?t.girlsScore:"boys"===L?t.boysScore:t.score)-a}),filteredEvents:"combined"===L?h:h.filter(e=>e.gender===L)}),ht=()=>{trackEvent("export_csv",{scoring_mode:L});const{modeLabel:e,sortedTeams:t,filteredEvents:a}=yt();let r="Swim Meet Results"+e+"\n\n";r+="FINAL STANDINGS\n",r+="Place,Team,Score\n",t.forEach((e,t)=>{const a="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score;r+=t+1+',"'+e.name.replace(/"/g,'""')+'",'+a+"\n"}),"combined"===L&&t.length>0&&(r+="\nGIRLS SCORES\n",r+="Place,Team,Score\n",[...b].sort((e,t)=>t.girlsScore-e.girlsScore).forEach((e,t)=>{r+=t+1+',"'+e.name.replace(/"/g,'""')+'",'+e.girlsScore+"\n"}),r+="\nBOYS SCORES\n",r+="Place,Team,Score\n",[...b].sort((e,t)=>t.boysScore-e.boysScore).forEach((e,t)=>{r+=t+1+',"'+e.name.replace(/"/g,'""')+'",'+e.boysScore+"\n"})),r+="\nEVENT RESULTS\n",r+="Event,Gender,Place,Team(s),Points\n",a.forEach(e=>{const t="diving"===getEventType(e),a="relay"===getEventType(e),n=t?ze:a?Ue:He,l="girls"===e.gender?"Girls":"Boys";e.results&&e.results.length>0?[...e.results].sort((e,t)=>e.place-t.place).forEach(t=>{const a=t.teamIds.length;let s;if(a>1){let e=0;for(let r=0;r<a;r++)e+=n[t.place+r]||0;s=(e/a).toFixed(1).replace(/\.0$/,"")}else s=n[t.place]??0;const o=t.teamIds.map(e=>{const t=b.find(t=>String(t.id)===String(e));return t?t.name:"Unknown"}).join(" / ");r+='"'+e.name.replace(/"/g,'""')+'",'+l+","+t.place+',"'+o.replace(/"/g,'""')+'",'+s+(a>1?" each":"")+"\n"}):r+='"'+e.name.replace(/"/g,'""')+'",'+l+",,,No results\n"});const n=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(n),s=document.createElement("a");s.href=l,s.download="swim-meet-results"+(e?"-"+L:"")+".csv",s.click(),URL.revokeObjectURL(l)},xt=()=>{trackEvent("export_pdf",{scoring_mode:L});const{modeLabel:e,sortedTeams:a,filteredEvents:r}=yt();let n="<!DOCTYPE html><html><head><title>Swim Meet Results</title>";n+="<style>",n+="body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; color: #1a1a1a; }",n+="h1 { text-align: center; color: #0e4d64; border-bottom: 3px solid #00d4aa; padding-bottom: 10px; }",n+="h2 { color: #0e4d64; margin-top: 24px; border-bottom: 1px solid #ddd; padding-bottom: 4px; }",n+="h3 { color: #164e6e; margin-top: 16px; }",n+="table { width: 100%; border-collapse: collapse; margin: 8px 0 16px 0; }",n+="th { background: #0e4d64; color: white; text-align: left; padding: 8px 12px; }",n+="td { padding: 6px 12px; border-bottom: 1px solid #e5e7eb; }",n+="tr:nth-child(even) { background: #f8fffe; }",n+=".tie { font-style: italic; color: #666; }",n+=".footer { text-align: center; margin-top: 24px; padding-top: 12px; border-top: 1px solid #ddd; color: #888; font-size: 12px; }",n+="@page { margin: 0.75in 0.6in 0.75in 0.6in; } @media print { body { margin: 0; padding: 0; } }",n+="</style></head><body>";const l=utils.escapeHtml;n+="<h1>Swim Meet Results"+l(e)+"</h1>",n+="<h2>Final Standings</h2>",n+="<table><tr><th>Place</th><th>Team</th><th>Score</th></tr>",a.forEach((e,t)=>{const a="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score;n+="<tr><td>"+(t+1)+"</td><td>"+l(e.name)+"</td><td>"+a+"</td></tr>"}),n+="</table>","combined"===L&&a.length>0&&(n+="<h3>Girls Scores</h3><table><tr><th>Place</th><th>Team</th><th>Score</th></tr>",[...b].sort((e,t)=>t.girlsScore-e.girlsScore).forEach((e,t)=>{n+="<tr><td>"+(t+1)+"</td><td>"+l(e.name)+"</td><td>"+e.girlsScore+"</td></tr>"}),n+="</table>",n+="<h3>Boys Scores</h3><table><tr><th>Place</th><th>Team</th><th>Score</th></tr>",[...b].sort((e,t)=>t.boysScore-e.boysScore).forEach((e,t)=>{n+="<tr><td>"+(t+1)+"</td><td>"+l(e.name)+"</td><td>"+e.boysScore+"</td></tr>"}),n+="</table>"),n+="<h2>Event-by-Event Results</h2>",r.forEach(e=>{const t="combined"===L?"girls"===e.gender?"Girls ":"Boys ":"",a="diving"===getEventType(e),r="relay"===getEventType(e),s=a?ze:r?Ue:He;n+="<h3>"+l(t+e.name)+"</h3>",e.results&&e.results.length>0?(n+="<table><tr><th>Place</th><th>Team</th><th>Points</th></tr>",[...e.results].sort((e,t)=>e.place-t.place).forEach(e=>{const t=e.teamIds.length;let a;if(t>1){let r=0;for(let a=0;a<t;a++)r+=s[e.place+a]||0;a=(r/t).toFixed(1).replace(/\.0$/,"")}else a=s[e.place]??0;const r=e.teamIds.map(e=>{const t=b.find(t=>String(t.id)===String(e));return t?l(t.name):"Unknown"}).join(", "),o=t>1?' <span class="tie">(TIE - '+a+" pts each)</span>":"";n+="<tr><td>"+e.place+"</td><td>"+r+o+"</td><td>"+a+"</td></tr>"}),n+="</table>"):n+='<p style="color:#888;margin-left:16px;">No results recorded</p>'}),n+='<div class="footer">Scored with SwimMeetScore.com &bull; https://swimmeetscore.com</div>',n+="</body></html>";const s=new Blob([n],{type:"text/html"}),o=URL.createObjectURL(s),c=window.open(o,"_blank");c?c.onload=()=>{c.document.title="SwimMeetScore.com",c.print(),URL.revokeObjectURL(o)}:t("Pop-up blocked. Please allow pop-ups to export PDF.")},vt=()=>{trackEvent("save_meet_file");const e={version:4,appVersion:APP_VERSION,exportedAt:(new Date).toISOString(),teams:b,events:h,settings:{scoringMode:L,numIndividualPlaces:F,numRelayPlaces:D,numDivingPlaces:$,individualPointSystem:He,relayPointSystem:Ue,divingPointSystem:ze,heatLockEnabled:he,aRelayOnly:ve,teamPlaceLimitEnabled:Ee,activeTemplate:Ie}},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a;const n=(new Date).toISOString().slice(0,10),l=b.map(e=>e.name).join("-vs-").replace(/[^a-zA-Z0-9-]/g,"");r.download="swim-meet-"+(l||"results")+"-"+n+".json",r.click(),URL.revokeObjectURL(a)};return useEffect(()=>{const e=e=>{ye.current&&!ye.current.contains(e.target)&&be(!1)};if(pe)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[pe]),React.createElement("main",{className:"min-h-screen p-4 font-outfit "+(I?"bg-pool-deep":"bg-gradient-to-b from-sky-100 via-cyan-50 to-blue-100"),style:I?{background:"linear-gradient(180deg, #0c1929 0%, #0f2942 50%, #164e6e 100%)"}:{}},I&&React.createElement("div",{className:"fixed inset-0 pointer-events-none opacity-[0.03]",style:{backgroundImage:"repeating-linear-gradient(90deg, transparent 0px, transparent 80px, #fbbf24 80px, #fbbf24 84px)"}}),e&&React.createElement("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center animate-fade-slide-up"},React.createElement("div",{className:"max-w-lg w-full p-4 rounded-lg flex items-center justify-between shadow-lg "+(I?"bg-red-900 text-red-100 border border-red-700":"bg-red-100 text-red-800 border border-red-300")},React.createElement("span",null,e),React.createElement("button",{onClick:()=>t(null),className:"ml-4 flex-shrink-0 "+(I?"text-red-300 hover:text-red-100":"text-red-500 hover:text-red-700")},React.createElement(X,{className:"w-5 h-5"})))),a&&React.createElement("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center animate-fade-slide-up"},React.createElement("div",{className:"max-w-lg w-full p-4 rounded-lg flex items-center justify-between shadow-lg "+(I?"bg-amber-900 text-amber-100 border border-amber-700":"bg-amber-100 text-amber-800 border border-amber-300")},React.createElement("span",null,"ðŸ”’ ",a),React.createElement("button",{onClick:()=>r(null),className:"ml-4 flex-shrink-0 "+(I?"text-amber-300 hover:text-amber-100":"text-amber-500 hover:text-amber-700")},React.createElement(X,{className:"w-5 h-5"})))),ce&&React.createElement("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center animate-fade-slide-up"},React.createElement("div",{className:"max-w-lg w-full p-4 rounded-lg flex items-center gap-3 shadow-lg "+(I?"bg-green-900 text-green-100 border border-green-700":"bg-green-100 text-green-800 border border-green-300")},React.createElement("span",null,"âœ“ ",ce))),S&&!C&&React.createElement("div",{className:"fixed top-4 left-4 right-4 z-50 flex justify-center pointer-events-none"},React.createElement("div",{className:"max-w-lg w-full p-3 rounded-lg flex items-center gap-3 shadow-lg pointer-events-auto "+(I?"bg-cyan-900/70 text-cyan-100 border border-cyan-700":"bg-cyan-100 text-cyan-800 border border-cyan-300")},React.createElement("span",{className:"text-lg"},"ðŸ“¶"),React.createElement("span",{className:"flex-1"},React.createElement("strong",null,"Offline Mode")," â€” No worries! The app works offline. Your data is saved locally."),React.createElement("button",{onClick:()=>T(!0),className:"ml-1 p-1 rounded-full transition-colors "+(I?"hover:bg-cyan-800 text-cyan-300":"hover:bg-cyan-200 text-cyan-600"),"aria-label":"Dismiss offline notification"},React.createElement(X,{className:"w-4 h-4"})))),React.createElement("div",{className:"max-w-6xl mx-auto"},n&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},React.createElement("div",{className:"rounded-lg p-6 max-w-md w-full "+(I?"bg-gray-800":"bg-white")},React.createElement("h3",{className:"text-lg font-bold mb-4 "+(I?"text-white":"text-gray-800")},"Confirm Action"),React.createElement("p",{className:"mb-6 "+(I?"text-gray-300":"text-gray-600")},n.message),React.createElement("div",{className:"flex gap-3 justify-end"},React.createElement("button",{onClick:n.onCancel,className:"px-4 py-2 rounded-lg "+(I?"bg-gray-700 hover:bg-gray-600 text-white":"bg-gray-200 hover:bg-gray-300 text-gray-800")},"Cancel"),React.createElement("button",{onClick:n.onConfirm,className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white"},"Confirm")))),s&&React.createElement(BulkEntryModal,{event:s,teams:b,darkMode:I,numPlaces:"diving"===getEventType(s)?$:"relay"===getEventType(s)?D:F,pointSystem:"diving"===getEventType(s)?ze:"relay"===getEventType(s)?Ue:He,existingResults:s.results,onSave:it,onClose:()=>o(null)}),E&&React.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},React.createElement("div",{className:"rounded-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col "+(I?"bg-gray-800":"bg-white")},React.createElement("div",{className:"px-6 py-4 flex items-center justify-between border-b "+(I?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200")},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(HelpCircle,{className:"w-6 h-6 "+(I?"text-cyan-400":"text-blue-600")}),React.createElement("h3",{className:"text-xl font-bold "+(I?"text-white":"text-gray-800")},"Help & Instructions")),React.createElement("button",{onClick:()=>R(!1),className:"p-2 rounded-lg transition "+(I?"hover:bg-gray-600":"hover:bg-gray-200")},React.createElement(X,{className:"w-5 h-5 "+(I?"text-gray-300":"text-gray-600")}))),React.createElement("div",{className:"flex-1 overflow-y-auto p-6 "+(I?"text-gray-300":"text-gray-700")},React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸŠ About Swim Meet Score"),React.createElement("p",{className:"mb-3"},"Swim Meet Score is a free, ad-free tool for tracking scores during swim meets. Perfect for coaches, parents, and officials at high school and competitive swimming events."),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-cyan-900/50 border border-cyan-700":"bg-cyan-50 border border-cyan-200")},React.createElement("h5",{className:"font-semibold mb-1 "+(I?"text-cyan-400":"text-cyan-700")},"ðŸ“± For Meet Organizers: QR Code Poster"),React.createElement("p",{className:"text-xs mb-2 "+(I?"text-gray-400":"text-gray-500")},"(Spectators can skip this section)"),React.createElement("p",{className:"text-sm mb-3 "+(I?"text-gray-300":"text-gray-600")},"Print a QR code poster so spectators can scan and track scores on their own phones â€” no printed score sheets needed!"),React.createElement("button",{onClick:()=>{trackEvent("print_qr_code");const e=window.open("","_blank","width=850,height=1100");e?(e.document.write('<!DOCTYPE html><html><head><title>SwimMeetScore QR Code</title><style>@page { size: letter; margin: 0; }* { margin: 0; padding: 0; box-sizing: border-box; }html, body { width: 8.5in; height: 11in; }body { font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 0.5in; text-align: center; }.header { margin-bottom: 0.4in; }.header h1 { font-size: 36pt; font-weight: bold; color: #0891b2; margin-bottom: 0.15in; line-height: 1.2; }.header p { font-size: 16pt; color: #374151; }.qr-container { padding: 0.25in; border: 4px solid #0891b2; border-radius: 0.2in; background: white; margin-bottom: 0.4in; }.qr-code { width: 3.5in; height: 3.5in; display: block; }.url { font-size: 24pt; font-weight: bold; color: #0891b2; margin-bottom: 0.25in; }.tagline { font-size: 14pt; color: #6b7280; max-width: 6in; line-height: 1.4; }.swimmer-icon { margin-top: 0.25in; font-size: 36pt; }@media print { html, body { width: 100%; height: 100%; } body { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }</style></head><body><div class="header"><h1>ðŸŠ Scan to Track<br/>Live Swim Meet Scores!</h1><p>Point your phone camera at the QR code below</p></div><div class="qr-container"><img src="https://api.qrserver.com/v1/create-qr-code/?size=350x350&data=https://swimmeetscore.com" onerror="this.onerror=null;this.src=\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAAEiAQAAAAB1xeIbAAAB5UlEQVR4nO2aTYrjMBCFv2oJeulDDpCjyDeYM+Vm8YEGrGVA5s1CkjvdmWFmMcY/LS2M7HyQR1F+cqlk4u9jfPsHCBrVqANR0coYmI0xz6A+9VvpOj3lAZcAMOJFFjR7ES+JcAeIl010fR+qpDcA8V02dIn8Qgyb6jo35b/cizjby/q7V/UnorqHlVn0f6b+5z82CkkJwMkGoHhOJ+m+qa7zU3P+oKnZ7pRno5mZ9dvpOjvloVvsPc6msXf55tn096r+2BTS5CRJIkzuOeBBi/HsVf2xKaQJCJOT7iyXLlGsvsV+NYqc8nxaXEvY88y12K9E5bzPl4+8z8+UiiO12K9C5byXFqtf3IdQf2ixX42KHuge9uw+gG49MF7TVrpOT9X6NV5kABrNpVLdRkNEn/ar/thUif34I9UP+m5CMBt0P72Fqe1jrkXl2FuY5mUHx9A4QN7RzBa0V/XHpupauyy4YVrqrVp0tbV2Neqjb9U9TLersvnYAJSVeMfqD07VPQUAwgSMfS2wxn47XWenit+XxqFT3cCfDXBY0Da6vifVLW+AErq1Xvlq1GvPkNorh9nTvjHXpmrfCsx6JyunRd5b32pNylO8HSD2uZAV0SULWrrme1V/bOr1TMJvRjsT2KiTUb8AfOYOwMRUyGwAAAAASUVORK5CYII=\';" class="qr-code" alt="QR Code for SwimMeetScore.com" /></div><div class="url">SwimMeetScore.com</div><div class="tagline">Free swim meet scoring tool â€” Track scores in real-time!<br/>Works on any phone â€¢ No app download required</div><div class="swimmer-icon">ðŸ†</div></body></html>'),e.document.close(),e.onload=function(){setTimeout(function(){e.print()},250)}):alert("Pop-up blocked! Please allow pop-ups for this site to print the QR code poster.")},className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition bg-cyan-600 hover:bg-cyan-700 text-white"},React.createElement(Printer,{className:"w-5 h-5"}),"Print QR Code Poster")),React.createElement("p",{className:"mt-6 text-sm "+(I?"text-cyan-400":"text-cyan-700")},"ðŸ“¶ ",React.createElement("strong",null,"Works at pools with poor cell service!")," Once loaded, the app works completely offline.")),React.createElement("div",{className:"mb-8 pb-2 border-b-2 "+(I?"border-cyan-600":"border-blue-400")},React.createElement("h4",{className:"text-lg font-bold "+(I?"text-cyan-400":"text-blue-600")},"Getting Started"),React.createElement("p",{className:"text-xs "+(I?"text-gray-400":"text-gray-500")},"Everything you need to score your first meet")),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"âš¡ Quick Start â€” Get scoring a Dual Meet in Under a Minute"),React.createElement("p",{className:"mb-3 text-sm "+(I?"text-gray-400":"text-gray-500")},"When you first open the app, it's already set up for a high school dual meet with default team names (Home Team and Away Team). Just follow these quick steps:"),React.createElement("ol",{className:"list-decimal list-inside space-y-2"},React.createElement("li",null,React.createElement("strong",null,'Confirm the "High School Dual Meet" template')," â€” Standard events and 6-4-3-2-1 scoring are preloaded."),React.createElement("li",null,React.createElement("strong",null,"Rename the teams")," â€” Click Home Team and Away Team to enter your actual team names."),React.createElement("li",null,React.createElement("strong",null,"Enter results")," â€” As each event finishes, tap the places for each team."),React.createElement("li",null,React.createElement("strong",null,"Watch the scoreboard update live")," â€” Scores calculate instantly as you go.")),React.createElement("div",{className:"mt-3 p-3 rounded-lg text-sm "+(I?"bg-green-900/30 border border-green-700/50":"bg-green-50 border border-green-200")},React.createElement("p",{className:""+(I?"text-green-400":"text-green-700")},"ðŸ’¡ ",React.createElement("strong",null,"Tip:"),' Turn on "Team Mode" (toggle next to Events header) for the fastest way to enter results at dual meets â€” just tap place numbers directly for each team!'))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸŠ How Scoring Works"),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-gray-700":"bg-blue-50")},React.createElement("p",{className:"text-sm mb-3"},"In a swim meet, teams earn points based on where their swimmers finish in each event. Higher place = more points. At the end, the team with the most total points wins."),React.createElement("div",{className:"text-sm p-3 rounded "+(I?"bg-gray-800":"bg-white")},React.createElement("p",{className:"font-medium mb-1"},"Standard Dual Meet Scoring (6-4-3-2-1):"),React.createElement("p",null,"â€¢ 1st place = 6 pts, 2nd = 4 pts, 3rd = 3 pts, 4th = 2 pts, 5th = 1 pt"),React.createElement("p",{className:"mt-2 font-medium mb-1"},"Relay events use different points (8-4-2):"),React.createElement("p",null,"â€¢ 1st place = 8 pts, 2nd = 4 pts, 3rd = 2 pts")),React.createElement("p",{className:"text-xs mt-3 "+(I?"text-gray-400":"text-gray-500")},'Don\'t worry about memorizing points â€” just pick the "High School Dual Meet" template and the app handles it all!'))),React.createElement("section",{className:"mb-8"},React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-gray-700":"bg-gray-100")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-gray-300":"text-gray-700")},"ðŸ“‹ Two Entry Modes"),React.createElement("div",{className:"text-sm space-y-2"},React.createElement("p",null,React.createElement("strong",null,"Place Mode (Default):")," Pick teams for each place using dropdowns. Best for recording ties and meets with 3+ teams."),React.createElement("p",null,React.createElement("strong",null,"Team Mode:"),' Toggle "Team Mode" next to Events header for faster mobile entry at dual meets â€” tap place numbers directly for each team. When you assign places for one team, the other team\'s places fill in automatically.')))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸ“± Install on Your Phone"),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-gray-700":"bg-blue-50")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-blue-400":"text-blue-700")},"iPhone / iPad (Safari)"),React.createElement("ol",{className:"list-decimal list-inside space-y-1 text-sm"},React.createElement("li",null,"Open swimmeetscore.com in Safari"),React.createElement("li",null,"Tap the Share button (square with arrow)"),React.createElement("li",null,'Scroll down and tap "Add to Home Screen"'),React.createElement("li",null,'Tap "Add" to confirm'))),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-gray-700":"bg-green-50")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-green-400":"text-green-700")},"Android (Chrome)"),w?React.createElement("div",{className:"mb-3"},React.createElement("button",{onClick:async()=>{if(!w)return;trackEvent("pwa_install_prompt"),w.prompt();const{outcome:e}=await w.userChoice;trackEvent("pwa_install_outcome",{outcome:e}),N(null)},className:"w-full py-3 px-4 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition flex items-center justify-center gap-2"},React.createElement("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},React.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})),"Install App Now"),React.createElement("p",{className:"text-xs mt-2 text-center "+(I?"text-gray-400":"text-gray-500")},"Click above to add Swim Meet Score to your home screen")):React.createElement("div",{className:"mb-3 p-3 rounded-lg text-sm "+(I?"bg-gray-600 text-gray-300":"bg-green-100 text-green-800")},React.createElement("p",{className:"font-medium mb-1"},"ðŸ“± Already installed or not available?"),React.createElement("p",{className:"text-xs"},"The install button appears automatically on Android Chrome. If you don't see it, you may have already installed the app, or try the manual steps below.")),React.createElement("p",{className:"text-xs font-medium mb-2 "+(I?"text-gray-400":"text-gray-600")},"Or install manually:"),React.createElement("ol",{className:"list-decimal list-inside space-y-1 text-sm"},React.createElement("li",null,"Open swimmeetscore.com in Chrome"),React.createElement("li",null,"Tap the three-dot menu (â‹®) in the top right"),React.createElement("li",null,'Tap "Add to Home screen" or "Install app"'),React.createElement("li",null,'Tap "Add" or "Install" to confirm')))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸ’¡ Tips"),React.createElement("ul",{className:"space-y-2"},React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Auto-fill in Team Mode:"),' When there are exactly 2 teams and one team has places assigned, an "Auto-fill" button appears in each event card. Pressing it assigns all remaining unoccupied places to the other team.'),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Works Offline:")," Once loaded, works without internet â€” perfect for pools with bad service!"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Save Templates:")," Create custom templates for your league's specific scoring rules"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Dark Mode:")," Use dark mode for better visibility at indoor pools"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Data Persists:")," Your data stays saved even if you close the browser"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Share Scores:")," Tap the Share button on the Scoreboard to quickly send team standings via text or social media"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Email Results:")," Tap the Email Results button next to Events to send a complete meet report including final standings and all event-by-event results with places"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Scoring Modes:")," Switch between Combined, Girls Only, or Boys Only scoring views"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Clear Data:")," Start fresh anytime from Settings â†’ Clear Data"))),React.createElement("div",{className:"mb-8 pb-2 border-b-2 "+(I?"border-gray-600":"border-gray-300")},React.createElement("h4",{className:"text-lg font-bold "+(I?"text-gray-400":"text-gray-500")},"Advanced Topics"),React.createElement("p",{className:"text-xs "+(I?"text-gray-500":"text-gray-400")},"Ties, championship meets, special rules, and more")),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸ¤ How Ties Are Handled"),React.createElement("p",{className:"mb-3"},"Swim Meet Score follows official tie-breaking rules used in competitive swimming:"),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-cyan-900/50 border border-cyan-700":"bg-cyan-50 border border-cyan-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-cyan-400":"text-cyan-700")},"ðŸ“ How to Record a Tie"),React.createElement("ol",{className:"text-sm space-y-1 list-decimal list-inside"},React.createElement("li",null,"Click on the place dropdown (1st, 2nd, etc.)"),React.createElement("li",null,"Check the boxes for ALL teams that tied for that place"),React.createElement("li",null,"The app will automatically calculate split points and skip places")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-cyan-300":"text-cyan-600")},'ðŸ’¡ You\'ll see a yellow highlight and "TIE" indicator when multiple teams are selected')),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-gray-700":"bg-yellow-50")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-yellow-400":"text-yellow-700")},"âž— Point Splitting"),React.createElement("p",{className:"text-sm mb-2"},"When swimmers tie, the points for the tied places are added together and split evenly."),React.createElement("div",{className:"text-sm p-3 rounded "+(I?"bg-gray-800":"bg-white")},React.createElement("p",{className:"font-medium mb-1"},"Example - Dual Meet (6-4-3-2-1 scoring):"),React.createElement("p",null,"â€¢ Two swimmers tie for 1st: (6 + 4) Ã· 2 = ",React.createElement("strong",null,"5 pts each")),React.createElement("p",{className:"mt-2 font-medium mb-1"},"Example - Championship (20-17-16-15... scoring):"),React.createElement("p",null,"â€¢ Two swimmers tie for 1st: (20 + 17) Ã· 2 = ",React.createElement("strong",null,"18.5 pts each")),React.createElement("p",null,"â€¢ Three swimmers tie for 2nd: (17 + 16 + 15) Ã· 3 = ",React.createElement("strong",null,"16 pts each")))),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-gray-700":"bg-orange-50")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-orange-400":"text-orange-700")},"â­ Place Skipping"),React.createElement("p",{className:"text-sm mb-2"},"After a tie, subsequent places are skipped based on how many swimmers tied."),React.createElement("div",{className:"text-sm p-3 rounded "+(I?"bg-gray-800":"bg-white")},React.createElement("p",{className:"font-medium mb-1"},"Examples:"),React.createElement("p",null,"â€¢ 2 swimmers tie for 1st â†’ Next finisher gets ",React.createElement("strong",null,"3rd place")," (2nd skipped)"),React.createElement("p",null,"â€¢ 3 swimmers tie for 2nd â†’ Next finisher gets ",React.createElement("strong",null,"5th place")," (3rd & 4th skipped)"),React.createElement("p",null,"â€¢ 2 swimmers tie for 5th â†’ Next finisher gets ",React.createElement("strong",null,"7th place")," (6th skipped)")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-orange-300":"text-orange-600")},'Skipped places will appear grayed out with "(tied above)" in the app')),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-gray-700":"bg-purple-50")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-purple-400":"text-purple-700")},"ðŸ† Complete Tie Example"),React.createElement("p",{className:"text-sm mb-2"},"Dual meet scoring (6-4-3-2-1) with Team A and Team B:"),React.createElement("div",{className:"text-sm p-3 rounded "+(I?"bg-gray-800":"bg-white")},React.createElement("p",null,"â€¢ 1st Place: Team A & Team B tie â†’ Each gets 5 pts (6+4Ã·2)"),React.createElement("p",null,"â€¢ 2nd Place: ",React.createElement("span",{className:"italic text-gray-500"},"(skipped - consumed by tie)")),React.createElement("p",null,"â€¢ 3rd Place: Team A â†’ Gets 3 pts"),React.createElement("p",null,"â€¢ 4th Place: Team B â†’ Gets 2 pts"),React.createElement("p",null,"â€¢ 5th Place: Team A â†’ Gets 1 pt"),React.createElement("p",{className:"mt-2 font-medium"},"Final: Team A = 9 pts, Team B = 7 pts")))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸ… Conference & Sectionals/State Templates"),React.createElement("p",{className:"mb-3"},"These templates are designed for championship-style meets with B-final/A-final heat structures."),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-amber-900/30 border border-amber-700/50":"bg-amber-50 border border-amber-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-amber-400":"text-amber-700")},"Conference Meet Template"),React.createElement("ul",{className:"text-sm space-y-1 "+(I?"text-gray-300":"text-gray-600")},React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Individual Events:")," 16 places scored (20-17-16-15-14-13-12-11-9-7-6-5-4-3-2-1)"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Relays:")," 8 places, A-relay only, double points (40-34-32-30-28-26-24-22)"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"B-relays")," are exhibition (non-scoring)"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Heat Lock enabled:")," B Finals swimmers locked to places 9-16"))),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-teal-900/30 border border-teal-700/50":"bg-teal-50 border border-teal-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-teal-400":"text-teal-700")},"Sectionals/State Template"),React.createElement("ul",{className:"text-sm space-y-1 "+(I?"text-gray-300":"text-gray-600")},React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Individual Events:")," 16 places scored (20-17-16-15-14-13-12-11-9-7-6-5-4-3-2-1)"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Relays:")," A-relay only, places = number of teams, double points"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Dynamic relay places:")," Since each team enters one A-relay, relay places automatically match team count (e.g., 11 teams = 11 relay places)"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Heat Lock enabled:")," B Finals swimmers locked to places 9-16"))),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-gray-700":"bg-gray-100")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-gray-300":"text-gray-700")},"Key Difference: Conference vs Sectionals/State"),React.createElement("p",{className:"text-sm "+(I?"text-gray-400":"text-gray-600")},"Conference scores relays to a fixed 8 places. Sectionals/State relay places dynamically match the number of teams (since only A-relays are allowed). Both use double points for relays compared to individual events."))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸ”’ Heat Lock & A-Relay Settings"),React.createElement("p",{className:"mb-3"},'Found in Settings under "Special Scoring Rules". These are visual reminders for championship meet scoring rules.'),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-amber-900/30 border border-amber-700/50":"bg-amber-50 border border-amber-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-amber-400":"text-amber-700")},"ðŸ”’ Heat Lock (B Finals/A Finals)"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"When enabled, displays a reminder on individual events that B Finals swimmers are locked to places 9-16, while A Finals swimmers compete for places 1-8."),React.createElement("p",{className:"text-xs "+(I?"text-amber-300":"text-amber-600")},React.createElement("strong",null,"Note:")," This is a visual reminder - you still manually enter which places each team earned.")),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-teal-900/30 border border-teal-700/50":"bg-teal-50 border border-teal-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-teal-400":"text-teal-700")},"ðŸ…°ï¸ Relay Only Scoring"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"When enabled, displays a reminder on relay events that only A-relays score points. B-relays are exhibition and don't count toward team scores."),React.createElement("p",{className:"text-xs "+(I?"text-teal-300":"text-teal-600")},React.createElement("strong",null,"Note:")," This is a visual reminder - simply don't enter results for B-relays, or enter them for record-keeping knowing they won't affect your manual score calculations."))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸš« Team Place Limit (relays)"),React.createElement("p",{className:"mb-3"},'Found in Settings under "Special Scoring Rules". This rule prevents a single team from occupying all scoring places in relay events.'),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-red-900/30 border border-red-700/50":"bg-red-50 border border-red-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-red-400":"text-red-700")},"ðŸ“‹ How It Works"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"When enabled (default for high school dual meets), a team can score at most ",React.createElement("strong",null,"(number of places - 1)")," positions in any relay event."),React.createElement("div",{className:"text-sm p-3 rounded "+(I?"bg-gray-800":"bg-white")},React.createElement("p",{className:"font-medium mb-1"},"Example - 3-place relay (8-4-2 scoring):"),React.createElement("p",null,"â€¢ Team A takes 1st (8 pts) and 2nd (4 pts)"),React.createElement("p",null,"â€¢ Since max = 2 places, Team A cannot be added to 3rd place"),React.createElement("p",null,"â€¢ An error message will appear if you try to add Team A to a 3rd place")))),React.createElement("section",{className:"mb-8"},React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"âŒ Disqualification Handling"),React.createElement("p",{className:"mb-3"},"How to handle disqualifications (DQs) and their interaction with scoring rules."),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-orange-900/30 border border-orange-700/50":"bg-orange-50 border border-orange-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-orange-400":"text-orange-700")},"ðŸ“ Basic DQ Handling"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"If a swimmer finishing in a scoring position is disqualified, remaining finishers should advance normally:"),React.createElement("div",{className:"text-sm p-3 rounded "+(I?"bg-gray-800":"bg-white")},React.createElement("p",{className:"font-medium mb-1"},"Example:"),React.createElement("p",null,"â€¢ Original finish: Team A (1st), Team B (2nd), Team C (3rd)"),React.createElement("p",null,"â€¢ Team A is disqualified"),React.createElement("p",null,"â€¢ New results: Team B becomes 1st (6 pts), Team C becomes 2nd (4 pts)")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-orange-300":"text-orange-600")},React.createElement("strong",null,"How to record:")," Simply don't enter the DQ'd team's placement, or remove them from the place they were in. Enter the advancing swimmers in their new places.")),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-purple-900/30 border border-purple-700/50":"bg-purple-50 border border-purple-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-purple-400":"text-purple-700")},"ðŸ”„ DQ + Team Place Limit (relays)"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"When Team Place Limit is enabled, after advancing places due to a DQ in a relay, the team limit rule still applies."),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-purple-300":"text-purple-600")},React.createElement("strong",null,"Key point:")," The app automatically recalculates scoring whenever you change place assignments. Just update the placements after the DQ and the limit rules will be applied automatically."))),React.createElement("section",null,React.createElement("h4",{className:"text-lg font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"ðŸ“¤ Sharing & Emailing Results"),React.createElement("div",{className:"p-4 rounded-lg mb-4 "+(I?"bg-cyan-900/30 border border-cyan-700/50":"bg-cyan-50 border border-cyan-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-cyan-400":"text-cyan-700")},"Share Button (Quick Share)"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"Located on the Scoreboard. Quickly shares team standings with medal emojis via text, social media, or copies to clipboard."),React.createElement("p",{className:"text-xs "+(I?"text-gray-400":"text-gray-500")},"Best for: Quick updates during the meet, social media posts")),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-amber-900/30 border border-amber-700/50":"bg-amber-50 border border-amber-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-amber-400":"text-amber-700")},"Email Results Button (Full Report)"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"Located next to the Events heading. Opens your email app with a complete meet report including:"),React.createElement("ul",{className:"text-sm space-y-1 ml-4 "+(I?"text-gray-300":"text-gray-600")},React.createElement("li",null,"â€¢ Final team standings with points"),React.createElement("li",null,"â€¢ Gender breakdown (Combined mode)"),React.createElement("li",null,"â€¢ Event-by-event results with all places"),React.createElement("li",null,"â€¢ Tie indicators where applicable")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-gray-400":"text-gray-500")},"Best for: Post-meet reports to coaches, parents, athletic directors")),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-green-900/30 border border-green-700/50":"bg-green-50 border border-green-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-green-400":"text-green-700")},"Export (PDF & CSV)"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"The Export button next to Email Results lets you download meet results in different formats:"),React.createElement("ul",{className:"text-sm space-y-1 ml-4 "+(I?"text-gray-300":"text-gray-600")},React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"PDF:")," Opens a printable report you can save as PDF or print for officials"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"CSV:")," Downloads a spreadsheet file compatible with Excel, Google Sheets, TeamUnify, or Hy-Tek"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Save Meet File:")," Downloads meet data as a .json file for backup")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-gray-400":"text-gray-500")},"Best for: Printing results, uploading to team management software, backing up data")),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-purple-900/30 border border-purple-700/50":"bg-purple-50 border border-purple-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-purple-400":"text-purple-700")},"Save/Load Meet Files"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"Found in Settings under Export & Save. Protects your data from being lost if you clear your browser cache:"),React.createElement("ul",{className:"text-sm space-y-1 ml-4 "+(I?"text-gray-300":"text-gray-600")},React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Save Meet to File:")," Downloads your entire meet (teams, events, scores, settings) as a .json file"),React.createElement("li",null,"â€¢ ",React.createElement("strong",null,"Load Meet from File:")," Restores a previously saved meet file â€” great for moving data between devices")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-gray-400":"text-gray-500")},"Best for: Backing up before clearing cache, transferring a meet from phone to laptop")),React.createElement("div",{className:"p-4 rounded-lg "+(I?"bg-indigo-900/30 border border-indigo-700/50":"bg-indigo-50 border border-indigo-200")},React.createElement("h5",{className:"font-semibold mb-2 "+(I?"text-indigo-400":"text-indigo-700")},"Meet History"),React.createElement("p",{className:"text-sm mb-2 "+(I?"text-gray-300":"text-gray-600")},"Found in Settings under Meet History. Lets you save and review past meets without leaving the app:"),React.createElement("ul",{className:"text-sm space-y-1 ml-4 "+(I?"text-gray-300":"text-gray-600")},React.createElement("li",null,"â€¢ Save up to 20 past meets in your browser"),React.createElement("li",null,"â€¢ Each entry shows team names, date, and current leader"),React.createElement("li",null,"â€¢ Load any saved meet to review or continue scoring"),React.createElement("li",null,"â€¢ Delete old meets you no longer need")),React.createElement("p",{className:"text-xs mt-2 "+(I?"text-gray-400":"text-gray-500")},"Best for: Keeping a record of your season, reviewing past results")))),React.createElement("div",{className:"px-6 py-4 border-t "+(I?"bg-gray-700 border-gray-600":"bg-gray-50 border-gray-200")},React.createElement("button",{onClick:()=>R(!1),className:"w-full py-3 rounded-lg font-semibold transition "+(I?"bg-cyan-600 hover:bg-cyan-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white")},"Got It!"),React.createElement("p",{className:"text-center text-xs mt-3 "+(I?"text-gray-500":"text-gray-400")},"Version ",APP_VERSION)))),React.createElement("div",{className:"rounded-2xl shadow-xl p-4 sm:p-6 mb-6 backdrop-blur-sm "+(I?"bg-pool-mid/80 border border-chlorine/20":"bg-white/90 border border-cyan-200")},React.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("div",{className:"p-2 rounded-xl "+(I?"bg-chlorine/20":"bg-cyan-100")},React.createElement(Swimmer,{className:"w-8 h-8 "+(I?"text-chlorine":"text-cyan-600")})),React.createElement("div",null,React.createElement("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight "+(I?"text-white":"text-slate-800")},"Swim Meet ",React.createElement("span",{className:I?"text-chlorine":"text-cyan-600"},"Score")))),React.createElement("div",{className:"flex items-center gap-2"},React.createElement("button",{onClick:()=>{R(!0),trackEvent("open_help")},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition text-sm font-medium "+(I?"bg-pool-light/50 hover:bg-pool-light text-white border border-white/10":"bg-cyan-50 hover:bg-cyan-100 text-cyan-700 border border-cyan-200")},React.createElement(HelpCircle,{className:"w-5 h-5"}),"Help & Info"),React.createElement("button",{onClick:()=>{f(!v),v?tt():(setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),100),trackEvent("open_settings"))},className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition text-sm font-medium "+(I?"bg-chlorine/20 hover:bg-chlorine/30 text-chlorine border border-chlorine/30":"bg-cyan-600 hover:bg-cyan-700 text-white")},React.createElement(Settings,{className:"w-5 h-5"}),"Settings"))),React.createElement("p",{className:"text-sm mb-6 "+(I?"text-slate-400":"text-slate-500")},"Free swimming scoresheet and swim meet scoring tool. Track team scores, individual events, relays, and diving. High school dual meet scoresheet, championship meets, and more â€” use instantly, no download required!"),v&&React.createElement("div",{className:"rounded-2xl mb-6 mt-6 relative overflow-hidden "+(I?"bg-pool-mid border border-chlorine/30":"bg-white border border-cyan-200 shadow-xl")},React.createElement("div",{className:"px-4 sm:px-6 py-4 flex items-center justify-between "+(I?"bg-chlorine/20":"bg-gradient-to-r from-cyan-500 to-blue-500")},React.createElement("div",{className:"flex items-center gap-3"},React.createElement(Settings,{className:"w-6 h-6 "+(I?"text-chlorine":"text-white")}),React.createElement("h3",{className:"text-xl font-bold "+(I?"text-chlorine":"text-white")},"Settings")),React.createElement("button",{onClick:()=>{f(!1),tt()},className:"p-2 rounded-lg transition "+(I?"bg-white/10 hover:bg-white/20":"bg-white/20 hover:bg-white/30")},React.createElement(X,{className:"w-5 h-5 text-white"}))),React.createElement("div",{className:"p-3 sm:p-4"},React.createElement("div",{className:"flex items-center justify-between mb-3 pb-3 border-b "+(I?"border-gray-700":"border-gray-200")},React.createElement("span",{className:"text-xs font-medium "+(I?"text-gray-400":"text-gray-500")},"Tap sections to expand/collapse"),React.createElement("button",{onClick:()=>{const e=["manage-teams","scoring-templates","special-scoring","scoring-places","data-management","point-systems","appearance"],t=e.some(e=>Le[e]),a={};e.forEach(e=>{a[e]=!t}),je(a),utils.saveToStorage("collapsedSections",a)},className:"text-xs font-medium px-3 py-1.5 rounded-lg transition "+(I?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200")},Object.values(Le).some(Boolean)?"Expand All":"Collapse All")),React.createElement(CollapsibleSection,{id:"scoring-templates",title:"Scoring Templates",description:Ie?`Using: ${{high_school:"HS Dual Meet",conference:"Conference",sectionals:"Sectionals/State"}[Ie]||(Ie.startsWith("usa_swimming_")?"USA Swimming "+Ie.split("_")[2]+"-Lane":Ie.startsWith("custom_")?(ae.find(e=>"custom_"+e.id===Ie)||{}).name||"Custom":Ie.replace(/_/g," "))}`:"Quick presets for common meets",isCollapsed:Le["scoring-templates"],onToggle:Fe,darkMode:I,accentColor:"purple"},React.createElement("div",{className:"mb-5"},React.createElement("p",{className:"text-xs font-semibold uppercase tracking-wider mb-2.5 "+(I?"text-gray-400":"text-gray-500")},"Standard Meets"),React.createElement("div",{className:"grid grid-cols-1 gap-2.5"},[{label:"HS Dual Meet",key:"high_school",onClick:()=>{B(5),O(3),H(3),_e({1:6,2:4,3:3,4:2,5:1,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0}),We({1:8,2:4,3:2,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0}),Ve({1:5,2:3,3:1,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0}),xe(!1),fe(!1),Re(!0);const e=[{id:utils.generateId(),name:"Home Team",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Away Team",score:0,girlsScore:0,boysScore:0}];y(e);const t=ut.map(e=>({id:utils.generateId(),name:e.name,type:e.type,gender:e.gender,results:[]}));x(t),Oe(Be(t)),Je(e,t),Ae("high_school"),trackEvent("load_template",{template_name:"high_school_meet"})},desc:"2 teams Â· 5 places",color:"pink"},{label:"Conference",key:"conference",onClick:()=>{B(16),O(8),H(16),_e({1:20,2:17,3:16,4:15,5:14,6:13,7:12,8:11,9:9,10:7,11:6,12:5,13:4,14:3,15:2,16:1,17:0,18:0,19:0,20:0}),We({1:40,2:34,3:32,4:30,5:28,6:26,7:24,8:22,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0}),Ve({1:20,2:17,3:16,4:15,5:14,6:13,7:12,8:11,9:9,10:7,11:6,12:5,13:4,14:3,15:2,16:1,17:0,18:0,19:0,20:0}),xe(!0),fe(!0),Re(!1);const e=[{id:utils.generateId(),name:"Team 1",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 2",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 3",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 4",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 5",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 6",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 7",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 8",score:0,girlsScore:0,boysScore:0}];y(e);const t=pt.map(e=>({id:utils.generateId(),name:e.name,type:e.type,gender:e.gender,results:[]}));x(t),Oe(Be(t)),Je(e,t),Ae("conference"),trackEvent("load_template",{template_name:"conference_meet"})},desc:"8 teams Â· 16 places",color:"amber"},{label:"Sectionals/State",key:"sectionals",onClick:()=>{B(16),H(16),_e({1:20,2:17,3:16,4:15,5:14,6:13,7:12,8:11,9:9,10:7,11:6,12:5,13:4,14:3,15:2,16:1,17:0,18:0,19:0,20:0}),We({1:40,2:34,3:32,4:30,5:28,6:26,7:24,8:22,9:18,10:14,11:12,12:10,13:8,14:6,15:4,16:2,17:1,18:1,19:1,20:1}),Ve({1:20,2:17,3:16,4:15,5:14,6:13,7:12,8:11,9:9,10:7,11:6,12:5,13:4,14:3,15:2,16:1,17:0,18:0,19:0,20:0}),xe(!0),fe(!0),Re(!1);const e=[{id:utils.generateId(),name:"Team 1",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 2",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 3",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 4",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 5",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 6",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 7",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 8",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 9",score:0,girlsScore:0,boysScore:0},{id:utils.generateId(),name:"Team 10",score:0,girlsScore:0,boysScore:0}];y(e),O(e.length);const t=pt.map(e=>({id:utils.generateId(),name:e.name,type:e.type,gender:e.gender,results:[]}));x(t),Oe(Be(t)),Je(e,t),Ae("sectionals"),trackEvent("load_template",{template_name:"sectionals_meet"})},desc:"10 teams Â· 16 places",color:"teal"}].map(e=>{const t=Ie===e.key,a={pink:I?"bg-pink-700 hover:bg-pink-600":"bg-pink-600 hover:bg-pink-700",amber:I?"bg-amber-700 hover:bg-amber-600":"bg-amber-600 hover:bg-amber-700",teal:I?"bg-teal-700 hover:bg-teal-600":"bg-teal-600 hover:bg-teal-700"};return React.createElement("button",{key:e.key,onClick:e.onClick,className:`flex items-center justify-between px-4 py-3 rounded-xl ${a[e.color]} text-white font-medium transition-all shadow-md hover:shadow-lg active:scale-95 ${t?"ring-[3px] ring-white shadow-lg scale-[1.02]":""}`},React.createElement("span",{className:"text-sm"},e.label),React.createElement("span",{className:"text-xs text-white/80"},e.desc))}))),React.createElement("div",{className:"mb-5 p-3 rounded-xl "+(I?"bg-gray-700/50":"bg-indigo-50")},React.createElement("p",{className:"text-xs font-semibold uppercase tracking-wider mb-1 "+(I?"text-gray-400":"text-indigo-600")},"USA Swimming Multi-team"),React.createElement("p",{className:"text-xs mb-2.5 "+(I?"text-gray-500":"text-indigo-400")},"Select by lane count Â· Relay points doubled"),React.createElement("div",{className:"grid grid-cols-4 gap-2"},[4,5,6,7,8,9,10].map(e=>{const t=Ie==="usa_swimming_"+e;return React.createElement("button",{key:e,onClick:()=>(e=>{const t=bt[e];if(!t)return;const a=e;B(a),O(a),H(a);const r=e=>{const t={};for(let a=1;a<=20;a++)t[a]=e[a-1]||0;return t};_e(r(t.individual)),We(r(t.relay)),Ve(r(t.individual)),xe(!1),fe(!1),Re(!1);const n=[];for(let t=1;t<=e;t++)n.push({id:utils.generateId(),name:`Team ${t}`,score:0,girlsScore:0,boysScore:0});y(n);const l=pt.filter(e=>"Diving"!==e.name).map(e=>({id:utils.generateId(),name:e.name,gender:e.gender,results:[]}));x(l),Oe(Be(l)),Je(n,l),Ae(`usa_swimming_${e}`),trackEvent("load_template",{template_name:`usa_swimming_${e}_lane`})})(e),className:`flex flex-col items-center py-2 rounded-lg ${I?"bg-indigo-700 hover:bg-indigo-600":"bg-indigo-600 hover:bg-indigo-700"} text-white text-sm font-medium transition-all shadow-md hover:shadow-lg active:scale-95 ${t?"ring-[3px] ring-white shadow-lg scale-[1.02]":""}`},React.createElement("span",{className:"font-bold"},e),React.createElement("span",{className:"text-xs text-white/80"},"lanes"))}))),ae.length>0&&React.createElement("div",{className:"mb-4"},React.createElement("p",{className:"text-xs font-semibold uppercase tracking-wider mb-2.5 "+(I?"text-gray-400":"text-gray-500")},"Your Custom Templates"),React.createElement("div",{className:"grid grid-cols-2 gap-2"},ae.map(e=>{const a=Ie==="custom_"+e.id;return React.createElement("button",{key:e.id,onClick:()=>(e=>{if(e)try{B(utils.validateNumber(e.numIndividualPlaces,1,20,5)),O(utils.validateNumber(e.numRelayPlaces,1,20,3)),H(utils.validateNumber(e.numDivingPlaces,1,20,3)),e.individualPointSystem&&"object"==typeof e.individualPointSystem&&_e({...e.individualPointSystem}),e.relayPointSystem&&"object"==typeof e.relayPointSystem&&We({...e.relayPointSystem}),e.divingPointSystem&&"object"==typeof e.divingPointSystem&&Ve({...e.divingPointSystem}),"boolean"==typeof e.heatLockEnabled&&xe(e.heatLockEnabled),"boolean"==typeof e.aRelayOnly&&fe(e.aRelayOnly),"boolean"==typeof e.teamPlaceLimitEnabled&&Re(e.teamPlaceLimitEnabled);let a=b;if(e.teams&&Array.isArray(e.teams)&&(a=e.teams.filter(e=>e&&e.name).map(e=>({id:utils.generateId(),name:e.name,score:0,girlsScore:0,boysScore:0})),y(a)),e.events&&Array.isArray(e.events)){const t=e.events.filter(e=>e&&e.name&&e.gender).map((e,t)=>({id:utils.generateId(),name:e.name,type:e.type||getEventType(e),gender:e.gender,results:[]}));x(t),Oe(Be(t)),Je(a,t)}else Je(a,h);Ae("custom_"+e.id),t(null)}catch(e){console.error("Error loading template:",e),t("Failed to load template. Template may be corrupted.")}else t("Invalid template.")})(e),className:`flex items-center justify-between w-full px-3 py-2.5 rounded-xl ${I?"bg-gray-600 hover:bg-gray-550":"bg-white border border-gray-200 hover:border-gray-300"} transition-all cursor-pointer ${a?"ring-[3px] ring-purple-400 shadow-md":"shadow-sm"}`},React.createElement("span",{className:"font-medium text-sm truncate "+(I?"text-cyan-400":"text-blue-600")},e.name),React.createElement("span",{role:"button",onClick:t=>{var a;t.stopPropagation(),a=e.id,re(ae.filter(e=>e.id!==a))},className:"text-red-400 hover:text-red-500 p-0.5 ml-1 flex-shrink-0"},React.createElement(X,{className:"w-3.5 h-3.5"})))}))),se?React.createElement("div",{className:"flex flex-col gap-2"},React.createElement("input",{type:"text",id:"template-name",name:"template-name",value:ne,onChange:e=>le(e.target.value),onKeyDown:e=>"Enter"===e.key&&st(),placeholder:"Template name","aria-label":"Template name",autoFocus:!0,className:"w-full px-3 py-2.5 border rounded-xl "+(I?"bg-gray-600 border-gray-500 text-white placeholder-gray-400":"bg-white border-gray-300")}),React.createElement("div",{className:"flex gap-2"},React.createElement("button",{onClick:st,className:`flex-1 px-4 py-2.5 rounded-xl ${I?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600"} text-white font-medium transition-all`},"Save"),React.createElement("button",{onClick:()=>{oe(!1),le("")},className:`flex-1 px-4 py-2.5 rounded-xl ${I?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-300 hover:bg-gray-400 text-gray-800"} font-medium transition-all`},"Cancel"))):React.createElement("button",{onClick:()=>oe(!0),className:`w-full px-4 py-2.5 rounded-xl border-2 border-dashed ${I?"border-gray-500 hover:border-gray-400 text-gray-300 hover:text-white":"border-gray-300 hover:border-gray-400 text-gray-500 hover:text-gray-700"} font-medium transition-all`},"+ Save Current Settings as Template"),React.createElement("p",{className:"text-xs mt-3 text-center "+(I?"text-gray-500":"text-gray-400")},"Templates save team names, point systems, places, and event lineup")),React.createElement(CollapsibleSection,{id:"manage-teams",title:"Manage Teams",description:`${b.length} team${1!==b.length?"s":""} configured`,isCollapsed:Le["manage-teams"],onToggle:Fe,darkMode:I,accentColor:"green"},React.createElement("div",{className:"flex flex-col gap-2 mb-3"},React.createElement("input",{type:"text",id:"new-team-name",name:"new-team-name",value:P,onChange:e=>M(e.target.value),onKeyDown:e=>"Enter"===e.key&&Xe(),placeholder:"Team name","aria-label":"Team name",className:"flex-1 px-3 py-2 border rounded-lg "+(I?"bg-gray-600 border-gray-500 text-white placeholder-gray-400":"bg-white border-gray-300")}),React.createElement("button",{onClick:Xe,className:`w-full px-4 py-2.5 rounded-lg flex items-center justify-center gap-2 ${I?"bg-cyan-600 hover:bg-cyan-700":"bg-blue-600 hover:bg-blue-700"} text-white font-medium`},React.createElement(Plus,{className:"w-4 h-4"})," Add Team")),b.length>0&&React.createElement("div",{className:"flex flex-wrap gap-2"},b.map(e=>React.createElement("div",{key:e.id,className:"flex items-center gap-2 px-3 py-2 rounded-lg "+(I?"bg-gray-600 text-white":"bg-white border border-gray-200")},V===e.id?React.createElement("input",{type:"text",id:`settings-edit-team-${e.id}`,name:"settings-edit-team-name",value:q,onChange:e=>J(e.target.value),onFocus:e=>e.target.select(),onBlur:()=>et(e.id),onKeyDown:t=>{"Enter"===t.key&&et(e.id),"Escape"===t.key&&tt()},autoFocus:!0,"aria-label":"Edit team name",className:"text-sm px-2 py-1 border rounded min-w-[80px] "+(I?"bg-gray-700 border-gray-500 text-white":"bg-white border-gray-300")}):React.createElement("span",{onClick:()=>(e=>{G(e.id),J(e.name)})(e),className:"text-sm cursor-pointer hover:underline"},e.name),React.createElement("button",{onClick:()=>(e=>{if(b.length<=1)t("At least one team is required.");else try{Qe("remove team");const a=b.filter(t=>t&&t.id!==e);y(a),Je(a,h),t(null)}catch(e){console.error("Error removing team:",e),t("Failed to remove team. Please try again.")}})(e.id),className:"text-red-500 hover:text-red-700 p-1"},React.createElement(X,{className:"w-4 h-4"})))))),React.createElement(CollapsibleSection,{id:"special-scoring",title:"Special Scoring Rules",description:(()=>{const e=[];return Ee&&e.push("Team Place Limit"),he&&e.push("Heat Lock"),ve&&e.push("A-Relay Only"),e.length>0?`Active: ${e.join(", ")}`:"Heat lock, relay, and place limit options"})(),isCollapsed:Le["special-scoring"],onToggle:Fe,darkMode:I,accentColor:"amber"},React.createElement("div",{className:"space-y-2"},React.createElement("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg transition "+(I?"hover:bg-gray-700/50":"hover:bg-amber-50")},React.createElement("input",{type:"checkbox",id:"team-place-limit",name:"team-place-limit",checked:Ee,onChange:e=>{Ae(null),Re(e.target.checked)},className:"w-5 h-5 rounded accent-amber-500 flex-shrink-0"}),React.createElement("div",null,React.createElement("span",{className:"font-medium "+(I?"text-slate-200":"text-slate-700")},"Team Place Limit (relays)"),React.createElement("p",{className:"text-xs "+(I?"text-slate-400":"text-slate-500")},"A team cannot occupy all scoring places in any relay event (e.g., max 2 of 3 relay places)"))),React.createElement("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg transition "+(I?"hover:bg-gray-700/50":"hover:bg-amber-50")},React.createElement("input",{type:"checkbox",id:"heat-lock",name:"heat-lock",checked:he,onChange:e=>{Ae(null),xe(e.target.checked)},className:"w-5 h-5 rounded accent-amber-500 flex-shrink-0"}),React.createElement("div",null,React.createElement("span",{className:"font-medium "+(I?"text-slate-200":"text-slate-700")},"Heat Lock (B Finals/A Finals)"),React.createElement("p",{className:"text-xs "+(I?"text-slate-400":"text-slate-500")},"B Finals swimmers locked to places 9-16; A Finals compete for 1-8"))),React.createElement("label",{className:"flex items-center gap-3 cursor-pointer p-3 rounded-lg transition "+(I?"hover:bg-gray-700/50":"hover:bg-amber-50")},React.createElement("input",{type:"checkbox",id:"a-relay-only",name:"a-relay-only",checked:ve,onChange:e=>{Ae(null),fe(e.target.checked)},className:"w-5 h-5 rounded accent-amber-500 flex-shrink-0"}),React.createElement("div",null,React.createElement("span",{className:"font-medium "+(I?"text-slate-200":"text-slate-700")},"A-Relay Only Scoring"),React.createElement("p",{className:"text-xs "+(I?"text-slate-400":"text-slate-500")},"Only A-relays score; B-relays are exhibition (non-scoring)")))),(Ee||he||ve)&&React.createElement("div",{className:"mt-3 p-3 rounded-lg text-sm "+(I?"bg-amber-900/30 border border-amber-700/50 text-amber-200":"bg-amber-50 border border-amber-200 text-amber-800")},React.createElement("strong",null,"Active:")," ",[Ee&&"Team Place Limit",he&&"Heat Lock",ve&&"A-Relay Only"].filter(Boolean).join(", "))),React.createElement(CollapsibleSection,{id:"scoring-places",title:"Number of Scoring Places",description:`Diving: ${$}, Individual: ${F}, Relay: ${D}`,isCollapsed:Le["scoring-places"],onToggle:Fe,darkMode:I,accentColor:"blue"},React.createElement("div",{className:"space-y-4"},React.createElement("div",{className:"flex items-center justify-between p-3 rounded-lg "+(I?"bg-gray-700/50":"bg-gray-50")},React.createElement("label",{htmlFor:"diving-places-input",className:"text-sm font-medium "+(I?"text-gray-300":"text-gray-600")},"Diving Events"),React.createElement(NumberInput,{value:$,onChange:ot(H),min:1,max:20,darkMode:I,label:"diving places",id:"diving-places-input"})),React.createElement("div",{className:"flex items-center justify-between p-3 rounded-lg "+(I?"bg-gray-700/50":"bg-gray-50")},React.createElement("label",{htmlFor:"individual-places-input",className:"text-sm font-medium "+(I?"text-gray-300":"text-gray-600")},"Individual Events"),React.createElement(NumberInput,{value:F,onChange:ot(B),min:1,max:20,darkMode:I,label:"individual places",id:"individual-places-input"})),React.createElement("div",{className:"flex items-center justify-between p-3 rounded-lg "+(I?"bg-gray-700/50":"bg-gray-50")},React.createElement("label",{htmlFor:"relay-places-input",className:"text-sm font-medium "+(I?"text-gray-300":"text-gray-600")},"Relay Events"),React.createElement(NumberInput,{value:D,onChange:ot(O),min:1,max:20,darkMode:I,label:"relay places",id:"relay-places-input"})))),React.createElement(CollapsibleSection,{id:"export-share",title:"Export & Save",description:"Export results or save/load meet files",isCollapsed:Le["export-share"],onToggle:Fe,darkMode:I,accentColor:"green"},React.createElement("p",{className:"text-sm mb-3 "+(I?"text-slate-400":"text-slate-500")},"Export your results or save/load meet data as a file for backup."),React.createElement("div",{className:"flex flex-col gap-3"},React.createElement("div",{className:"grid grid-cols-2 gap-2"},React.createElement("button",{onClick:xt,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition "+(I?"bg-chlorine/20 text-chlorine border border-chlorine/30 hover:bg-chlorine/30":"bg-cyan-600 hover:bg-cyan-700 text-white")},React.createElement(FileText,{className:"w-4 h-4"}),"PDF"),React.createElement("button",{onClick:ht,className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition "+(I?"bg-chlorine/20 text-chlorine border border-chlorine/30 hover:bg-chlorine/30":"bg-cyan-600 hover:bg-cyan-700 text-white")},React.createElement(Download,{className:"w-4 h-4"}),"CSV")),React.createElement("button",{onClick:vt,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition "+(I?"bg-green-500/20 text-green-400 border border-green-500/30 hover:bg-green-500/30":"bg-green-600 hover:bg-green-700 text-white")},React.createElement(Download,{className:"w-4 h-4"}),"Save Meet to File (.json)"),React.createElement("button",{onClick:()=>{trackEvent("load_meet_file");const e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{const a=e.target.files[0];if(!a)return;const r=new FileReader;r.onload=e=>{try{const a=JSON.parse(e.target.result);if(null==a||"object"!=typeof a||Array.isArray(a))return void t("Invalid meet file. Expected a JSON object.");const r=Object.prototype.hasOwnProperty;if(r.call(a,"__proto__")||r.call(a,"constructor")||r.call(a,"prototype"))return void t("Invalid meet file. Contains disallowed keys.");if(!Array.isArray(a.teams)||0===a.teams.length)return void t('Invalid meet file. "teams" must be a non-empty array.');for(const e of a.teams){if(null==e||"object"!=typeof e||Array.isArray(e))return void t("Invalid meet file. Each team must be an object.");if(null==e.id||"string"!=typeof e.id&&"number"!=typeof e.id)return void t('Invalid meet file. Each team must have a valid "id".');if("string"!=typeof e.name||0===e.name.trim().length)return void t('Invalid meet file. Each team must have a non-empty "name" string.');if(void 0!==e.score&&"number"!=typeof e.score)return void t('Invalid meet file. Team "score" must be a number.')}if(!Array.isArray(a.events))return void t('Invalid meet file. "events" must be an array.');for(const e of a.events){if(null==e||"object"!=typeof e||Array.isArray(e))return void t("Invalid meet file. Each event must be an object.");if("string"!=typeof e.name||0===e.name.trim().length)return void t('Invalid meet file. Each event must have a non-empty "name" string.');if("string"!=typeof e.gender||!["girls","boys"].includes(e.gender))return void t('Invalid meet file. Each event must have a "gender" of "girls" or "boys".');if(void 0!==e.results){if(!Array.isArray(e.results))return void t('Invalid meet file. Event "results" must be an array.');for(const a of e.results){if(null==a||"object"!=typeof a||Array.isArray(a))return void t("Invalid meet file. Each result must be an object.");if("number"!=typeof a.place||a.place<1)return void t('Invalid meet file. Each result must have a "place" number >= 1.');if(!Array.isArray(a.teamIds)||0===a.teamIds.length)return void t('Invalid meet file. Each result must have a non-empty "teamIds" array.')}}}if(void 0!==a.settings){if(null==a.settings||"object"!=typeof a.settings||Array.isArray(a.settings))return void t('Invalid meet file. "settings" must be an object.');const e=a.settings;if(void 0!==e.scoringMode&&!["combined","girls","boys"].includes(e.scoringMode))return void t("Invalid meet file. Invalid scoringMode value.");if(void 0!==e.numIndividualPlaces&&("number"!=typeof e.numIndividualPlaces||e.numIndividualPlaces<1||e.numIndividualPlaces>20))return void t("Invalid meet file. numIndividualPlaces must be 1-20.");if(void 0!==e.numRelayPlaces&&("number"!=typeof e.numRelayPlaces||e.numRelayPlaces<1||e.numRelayPlaces>20))return void t("Invalid meet file. numRelayPlaces must be 1-20.");if(void 0!==e.numDivingPlaces&&("number"!=typeof e.numDivingPlaces||e.numDivingPlaces<1||e.numDivingPlaces>20))return void t("Invalid meet file. numDivingPlaces must be 1-20.");const r=e=>null!=e&&"object"==typeof e&&!Array.isArray(e);if(void 0!==e.individualPointSystem&&!r(e.individualPointSystem))return void t("Invalid meet file. individualPointSystem must be an object.");if(void 0!==e.relayPointSystem&&!r(e.relayPointSystem))return void t("Invalid meet file. relayPointSystem must be an object.");if(void 0!==e.divingPointSystem&&!r(e.divingPointSystem))return void t("Invalid meet file. divingPointSystem must be an object.");if(void 0!==e.heatLockEnabled&&"boolean"!=typeof e.heatLockEnabled)return void t("Invalid meet file. heatLockEnabled must be a boolean.");if(void 0!==e.aRelayOnly&&"boolean"!=typeof e.aRelayOnly)return void t("Invalid meet file. aRelayOnly must be a boolean.");if(void 0!==e.teamPlaceLimitEnabled&&"boolean"!=typeof e.teamPlaceLimitEnabled)return void t("Invalid meet file. teamPlaceLimitEnabled must be a boolean.")}if(!confirm("Loading this file will replace your current meet data. Continue?"))return;const n=a.teams.map(e=>({...e,id:String(e.id)})),l=a.events.map(e=>({...e,id:String(e.id),type:e.type||getEventType(e),results:(e.results||[]).map(e=>({...e,teamIds:(e.teamIds||[]).map(String)}))}));if(y(n),x(l),a.settings){const e=a.settings;e.scoringMode&&j(e.scoringMode),e.numIndividualPlaces&&B(e.numIndividualPlaces),e.numRelayPlaces&&O(e.numRelayPlaces),e.numDivingPlaces&&H(e.numDivingPlaces),e.individualPointSystem&&_e(e.individualPointSystem),e.relayPointSystem&&We(e.relayPointSystem),e.divingPointSystem&&Ve(e.divingPointSystem),void 0!==e.heatLockEnabled&&xe(e.heatLockEnabled),void 0!==e.aRelayOnly&&fe(e.aRelayOnly),void 0!==e.teamPlaceLimitEnabled&&Re(e.teamPlaceLimitEnabled),e.activeTemplate&&Ae(e.activeTemplate)}ie("Meet loaded successfully!"),setTimeout(()=>ie(null),3e3)}catch(e){t("Could not read meet file. Make sure it is a valid .json file.")}},r.readAsText(a)},e.click()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition "+(I?"bg-amber-500/20 text-amber-400 border border-amber-500/30 hover:bg-amber-500/30":"bg-amber-600 hover:bg-amber-700 text-white")},React.createElement(Upload,{className:"w-4 h-4"}),"Load Meet from File"))),React.createElement(CollapsibleSection,{id:"meet-history",title:"Meet History",description:"Save and review past meets",isCollapsed:Le["meet-history"],onToggle:Fe,darkMode:I,accentColor:"purple"},React.createElement("p",{className:"text-sm mb-3 "+(I?"text-slate-400":"text-slate-500")},"Save your current meet to history so you can review it later. Up to 20 meets are stored in your browser."),React.createElement("button",{onClick:()=>{trackEvent("save_meet_history");const e=b.map(e=>e.name).join(" vs "),t=[...b].sort((e,t)=>t.score-e.score)[0],a=[{id:Date.now(),savedAt:(new Date).toISOString(),label:e||"Unnamed Meet",summary:t?t.name+" leads with "+t.score+" pts":"No scores",teams:JSON.parse(JSON.stringify(b)),events:JSON.parse(JSON.stringify(h)),settings:{scoringMode:L,numIndividualPlaces:F,numRelayPlaces:D,numDivingPlaces:$,individualPointSystem:He,relayPointSystem:Ue,divingPointSystem:ze,heatLockEnabled:he,aRelayOnly:ve,teamPlaceLimitEnabled:Ee,activeTemplate:Ie}},...ge].slice(0,20);ue(a),utils.saveToStorage("savedMeets",a),ie("Meet saved to history!"),setTimeout(()=>ie(null),3e3)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition mb-3 "+(I?"bg-purple-500/20 text-purple-400 border border-purple-500/30 hover:bg-purple-500/30":"bg-purple-600 hover:bg-purple-700 text-white")},React.createElement(Plus,{className:"w-4 h-4"}),"Save Current Meet to History"),ge.length>0?React.createElement("div",{className:"flex flex-col gap-2 max-h-64 overflow-y-auto"},ge.map(e=>React.createElement("div",{key:e.id,className:"flex items-center justify-between gap-2 px-3 py-2.5 rounded-lg "+(I?"bg-pool-deep/50 border border-white/5":"bg-gray-50 border border-gray-200")},React.createElement("div",{className:"flex-1 min-w-0"},React.createElement("div",{className:"text-sm font-medium truncate "+(I?"text-white":"text-gray-800")},e.label),React.createElement("div",{className:"text-xs "+(I?"text-gray-400":"text-gray-500")},new Date(e.savedAt).toLocaleDateString()," â€¢ ",e.summary)),React.createElement("div",{className:"flex items-center gap-1 flex-shrink-0"},React.createElement("button",{onClick:()=>(e=>{if(!confirm("Loading this meet will replace your current data. Continue?"))return;trackEvent("load_meet_history");const t=(e.teams||[]).map(e=>({...e,id:String(e.id)})),a=(e.events||[]).map(e=>({...e,id:String(e.id),type:e.type||getEventType(e),results:(e.results||[]).map(e=>({...e,teamIds:(e.teamIds||[]).map(String)}))}));if(y(t),x(a),e.settings){const t=e.settings;t.scoringMode&&j(t.scoringMode),t.numIndividualPlaces&&B(t.numIndividualPlaces),t.numRelayPlaces&&O(t.numRelayPlaces),t.numDivingPlaces&&H(t.numDivingPlaces),t.individualPointSystem&&_e(t.individualPointSystem),t.relayPointSystem&&We(t.relayPointSystem),t.divingPointSystem&&Ve(t.divingPointSystem),void 0!==t.heatLockEnabled&&xe(t.heatLockEnabled),void 0!==t.aRelayOnly&&fe(t.aRelayOnly),void 0!==t.teamPlaceLimitEnabled&&Re(t.teamPlaceLimitEnabled),t.activeTemplate&&Ae(t.activeTemplate)}de(!1)})(e),className:"px-2.5 py-1.5 rounded-lg text-xs font-medium transition "+(I?"bg-chlorine/20 text-chlorine hover:bg-chlorine/30":"bg-cyan-100 text-cyan-700 hover:bg-cyan-200"),title:"Load this meet"},"Load"),React.createElement("button",{onClick:()=>(e=>{const t=ge.filter(t=>t.id!==e);ue(t),utils.saveToStorage("savedMeets",t)})(e.id),className:"p-1.5 rounded-lg transition "+(I?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50"),title:"Delete from history"},React.createElement(Trash,{className:"w-3.5 h-3.5"})))))):React.createElement("p",{className:"text-sm text-center py-4 "+(I?"text-gray-500":"text-gray-400")},"No saved meets yet. Save your current meet to start building your history.")),React.createElement(CollapsibleSection,{id:"data-management",title:"Data Management",description:"Clear scores and reset data",isCollapsed:Le["data-management"],onToggle:Fe,darkMode:I,accentColor:"red"},React.createElement("p",{className:"text-sm mb-3 "+(I?"text-slate-400":"text-slate-500")},"Your data will persist when you refresh the page until you clear it."),React.createElement("div",{className:"flex flex-col gap-3"},React.createElement("button",{onClick:()=>{l({message:"Clear all scores but keep your teams, events, and saved templates?",onConfirm:()=>{try{Qe("clear scores");const e=h.map(e=>e?{...e,results:[]}:null);x(e),Oe(Be(e));const t=b.map(e=>e?{...e,score:0,girlsScore:0,boysScore:0}:null);y(t),utils.saveToStorage("teams",t),utils.saveToStorage("events",e),utils.saveToStorage("version",4),Je(t,e),l(null)}catch(e){console.error("Error clearing data:",e),t("Failed to clear data. Please try again."),l(null)}},onCancel:()=>l(null)})},className:"w-full px-4 py-3 rounded-xl font-medium transition text-left "+(I?"bg-orange-500/20 text-orange-400 border border-orange-500/30 hover:bg-orange-500/30":"bg-orange-500 hover:bg-orange-600 text-white")},"Clear Scores Only"),React.createElement("button",{onClick:()=>{l({message:"Clear ALL data including saved templates? You can undo this action.",onConfirm:()=>{try{Qe("clear all data");const e=[];for(let t=0;t<localStorage.length;t++){const a=localStorage.key(t);a&&a.startsWith("swimMeetScore_")&&e.push(a)}e.forEach(e=>localStorage.removeItem(e)),y(m),x(d),Oe(Be(d)),_e(g),We(u),Ve(p),B(5),O(3),H(3),re([]),A(!0),j("combined"),xe(!1),fe(!1),Re(!0),Ae("high_school"),utils.saveToStorage("version",4),Je(m,d),l(null)}catch(e){console.error("Error clearing all data:",e),t("Failed to clear all data. Please try again."),l(null)}},onCancel:()=>l(null)})},className:"w-full px-4 py-3 rounded-xl font-medium transition text-left "+(I?"bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30":"bg-red-500 hover:bg-red-600 text-white")},"Clear All Data & Templates"))),React.createElement(CollapsibleSection,{id:"point-systems",title:"Point Systems",description:"Configure points for each place",isCollapsed:Le["point-systems"],onToggle:Fe,darkMode:I,accentColor:"cyan"},React.createElement("div",{className:"space-y-6"},React.createElement("div",null,React.createElement("h5",{className:"font-medium text-sm mb-2 "+(I?"text-gray-300":"text-gray-700")},"Diving Points"),React.createElement("div",{className:"grid grid-cols-2 min-[400px]:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2"},dt({name:"Diving"}).map(e=>React.createElement(PointInput,{key:e,place:e,idPrefix:"diving-",value:ze[e]??0,onChange:t=>{Ae(null);const a={...ze,[e]:t};Ve(a)},onBlur:()=>Je(b,h),darkMode:I})))),React.createElement("div",null,React.createElement("h5",{className:"font-medium text-sm mb-2 "+(I?"text-gray-300":"text-gray-700")},"Individual Events Points"),React.createElement("div",{className:"grid grid-cols-2 min-[400px]:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2"},dt({name:"Swimming"}).map(e=>React.createElement(PointInput,{key:e,place:e,idPrefix:"individual-",value:He[e]??0,onChange:t=>{Ae(null);const a={...He,[e]:t};_e(a)},onBlur:()=>Je(b,h),darkMode:I})))),React.createElement("div",null,React.createElement("h5",{className:"font-medium text-sm mb-2 "+(I?"text-gray-300":"text-gray-700")},"Relay Events Points"),React.createElement("div",{className:"grid grid-cols-2 min-[400px]:grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2"},dt({name:"Relay"}).map(e=>React.createElement(PointInput,{key:e,place:e,idPrefix:"relay-",value:Ue[e]??0,onChange:t=>{Ae(null);const a={...Ue,[e]:t};We(a)},onBlur:()=>Je(b,h),darkMode:I})))))),React.createElement(CollapsibleSection,{id:"appearance",title:"Appearance",description:I?"Dark mode enabled":"Light mode enabled",isCollapsed:Le.appearance,onToggle:Fe,darkMode:I,accentColor:"slate"},React.createElement("label",{className:"flex items-center gap-3 cursor-pointer p-2 rounded-lg transition "+(I?"hover:bg-gray-700/50":"hover:bg-gray-100")},React.createElement("input",{type:"checkbox",id:"dark-mode",name:"dark-mode",checked:I,onChange:e=>A(e.target.checked),className:"w-5 h-5 rounded accent-cyan-500"}),React.createElement("span",{className:I?"text-slate-200":"text-slate-700"},"Dark Mode")))),React.createElement("div",{className:"px-4 sm:px-6 py-4 border-t "+(I?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200")},React.createElement("button",{onClick:()=>{f(!1),tt()},className:"w-full py-3 rounded-lg font-semibold text-white transition "+(I?"bg-cyan-600 hover:bg-cyan-700":"bg-blue-600 hover:bg-blue-700")},"Close Settings"))),React.createElement("div",{className:"rounded-2xl p-6 mb-6 relative overflow-hidden "+(I?"bg-gradient-to-br from-pool-mid to-pool-light border border-chlorine/20":"bg-gradient-to-br from-cyan-500 to-blue-600")},React.createElement("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"repeating-linear-gradient(90deg, transparent 0px, transparent 40px, rgba(255,255,255,0.3) 40px, rgba(255,255,255,0.3) 42px)"}}),React.createElement("div",{className:"relative flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-3"},React.createElement("div",{className:"flex items-center gap-3"},React.createElement("h2",{className:"text-2xl font-bold "+(I?"text-chlorine":"text-white")},"Scoreboard"),React.createElement("button",{onClick:async()=>{const e=(()=>{const e="combined"===L?"":"girls"===L?" (Girls)":" (Boys)",t=[...b].sort((e,t)=>{const a="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score;return("girls"===L?t.girlsScore:"boys"===L?t.boysScore:t.score)-a});let a=`ðŸŠ Swim Meet Scores${e}\n\n`;return t.forEach((e,t)=>{const r="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score,n=0===t?"ðŸ¥‡":1===t?"ðŸ¥ˆ":2===t?"ðŸ¥‰":"  ";a+="combined"===L?`${n} #${t+1} ${e.name}: ${r} pts (G: ${e.girlsScore}, B: ${e.boysScore})\n`:`${n} #${t+1} ${e.name}: ${r} pts\n`}),a+="\nðŸ“Š Scored with SwimMeetScore\n",a+="https://swimmeetscore.com",a+="\n\n\n",a})();if(trackEvent("share_scores",{method:navigator.share?"native":"clipboard",scoring_mode:L}),navigator.share)try{return void await navigator.share({title:"Swim Meet Scores",text:e})}catch(e){if("AbortError"===e.name)return}try{await navigator.clipboard.writeText(e),t(null),ie("Scores copied to clipboard!"),setTimeout(()=>ie(null),3e3)}catch(e){t("Failed to copy to clipboard")}},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition "+(I?"bg-chlorine/20 text-chlorine hover:bg-chlorine/30 border border-chlorine/30":"bg-white/20 text-white hover:bg-white/30"),title:"Share scores"},React.createElement(Share,{className:"w-4 h-4"}),"Share")),React.createElement("div",{className:"flex gap-1.5"},React.createElement("button",{onClick:()=>{j("combined"),trackEvent("change_scoring_mode",{mode:"combined"})},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition "+("combined"===L?I?"bg-chlorine text-pool-deep":"bg-white text-cyan-600":"bg-white/20 text-white hover:bg-white/30")},"Combined"),React.createElement("button",{onClick:()=>{j("girls"),trackEvent("change_scoring_mode",{mode:"girls"})},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition "+("girls"===L?"bg-pink-500 text-white":"bg-pink-400/30 text-white hover:bg-pink-400/50")},"Girls Only"),React.createElement("button",{onClick:()=>{j("boys"),trackEvent("change_scoring_mode",{mode:"boys"})},className:"px-3 py-1.5 rounded-lg text-xs font-semibold transition "+("boys"===L?"bg-blue-500 text-white":"bg-blue-400/30 text-white hover:bg-blue-400/50")},"Boys Only"))),React.createElement("div",{className:"relative grid gap-2"},0===mt.length?React.createElement("div",{className:"rounded-xl p-4 text-center "+(I?"bg-pool-deep/50 text-slate-400 border border-white/10":"bg-white/90 text-slate-500")},"No teams added yet. Add teams in Settings."):mt.map((e,t)=>React.createElement("div",{key:e.id,className:"rounded-xl p-2 sm:p-3 transition-all "+(0===t?I?"bg-gradient-to-r from-lane-gold/20 to-transparent border-l-4 border-lane-gold":"bg-gradient-to-r from-amber-50 to-white border-l-4 border-amber-400":I?"bg-pool-deep/50 border border-white/5":"bg-white/90")},React.createElement("div",{className:"flex flex-row items-center justify-between gap-1 sm:gap-2"},React.createElement("div",{className:"flex items-center gap-1.5 sm:gap-4 min-w-0 flex-shrink"},React.createElement("span",{className:"text-base sm:text-2xl font-bold flex-shrink-0 "+(0===t?I?"text-lane-gold":"text-amber-500":I?"text-slate-500":"text-slate-400")},"#",t+1),_===e.id?React.createElement("input",{type:"text",id:`scoreboard-edit-team-${e.id}`,name:"scoreboard-edit-team-name",value:W,onChange:e=>z(e.target.value),onFocus:e=>e.target.select(),onBlur:()=>Ze(e.id),onKeyDown:t=>{"Enter"===t.key&&Ze(e.id),"Escape"===t.key&&(U(null),z(""))},autoFocus:!0,"aria-label":"Edit team name",className:"text-sm sm:text-xl font-semibold px-2 py-1 border rounded min-w-0 "+(I?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300")}):React.createElement("span",{onClick:()=>(e=>{U(e.id),z(e.name)})(e),className:"text-sm sm:text-xl font-semibold cursor-pointer hover:underline truncate "+(I?"text-white":"text-gray-800")},e.name)),React.createElement("div",{className:"flex items-center gap-2 sm:gap-6 flex-shrink-0"},"combined"===L&&React.createElement(React.Fragment,null,React.createElement("div",{className:"flex gap-2 sm:gap-4 text-xs sm:text-sm"},React.createElement("div",{className:"text-center"},React.createElement("div",{className:"font-medium hidden sm:block "+(I?"text-pink-400":"text-pink-600")},"Girls"),React.createElement("div",{className:"text-sm sm:text-lg font-bold "+(I?"text-pink-400":"text-pink-600")},e.girlsScore)),React.createElement("div",{className:"text-center"},React.createElement("div",{className:"font-medium hidden sm:block "+(I?"text-blue-400":"text-blue-600")},"Boys"),React.createElement("div",{className:"text-sm sm:text-lg font-bold "+(I?"text-blue-400":"text-blue-600")},e.boysScore))),React.createElement("div",{className:"w-px h-6 sm:h-8 "+(I?"bg-white/20":"bg-gray-300")})),React.createElement("span",{className:"text-lg sm:text-3xl font-bold "+(I?"text-cyan-400":"text-blue-600")},"girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score))))))),React.createElement("div",null,React.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-2"},React.createElement("div",null,React.createElement("div",{className:"flex items-center gap-2"},React.createElement("h3",{className:"text-xl font-bold "+(I?"text-chlorine":"text-slate-800")},"Events"),React.createElement("button",{onClick:()=>{trackEvent("email_results",{scoring_mode:L});const e="combined"===L?"":"girls"===L?" (Girls Only)":" (Boys Only)",t=[...b].sort((e,t)=>{const a="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score;return("girls"===L?t.girlsScore:"boys"===L?t.boysScore:t.score)-a}),a="combined"===L?h:h.filter(e=>e.gender===L),r=encodeURIComponent("Swim Meet Results"+e);let n="SWIM MEET RESULTS"+e.toUpperCase()+"\n";n+="================================\n\n",n+="FINAL STANDINGS:\n\n",t.forEach((e,t)=>{const a="girls"===L?e.girlsScore:"boys"===L?e.boysScore:e.score,r=t+1;n+=(1===r?"1st":2===r?"2nd":3===r?"3rd":r+"th")+" Place: "+e.name+" - "+a+" points\n"}),"combined"===L&&t.length>0&&(n+="\n--------------------------------\n",n+="BREAKDOWN BY GENDER:\n\n",n+="Girls Scores:\n",[...b].sort((e,t)=>t.girlsScore-e.girlsScore).forEach((e,t)=>{n+="  "+(t+1)+". "+e.name+": "+e.girlsScore+" pts\n"}),n+="\nBoys Scores:\n",[...b].sort((e,t)=>t.boysScore-e.boysScore).forEach((e,t)=>{n+="  "+(t+1)+". "+e.name+": "+e.boysScore+" pts\n"})),a.length>0&&(n+="\n================================\n",n+="EVENT-BY-EVENT RESULTS:\n",n+="================================\n\n",a.forEach(e=>{const t="combined"===L?"girls"===e.gender?"Girls ":"Boys ":"",a="diving"===getEventType(e),r="relay"===getEventType(e),l=a?ze:r?Ue:He;if(n+=t+e.name+":\n",e.results&&e.results.length>0){[...e.results].sort((e,t)=>e.place-t.place).forEach(e=>{const t=e.place,a=1===t?"1st":2===t?"2nd":3===t?"3rd":t+"th",r=e.teamIds.length;let s;if(r>1){let e=0;for(let a=0;a<r;a++)e+=l[t+a]||0;s=(e/r).toFixed(1).replace(/\.0$/,"")}else s=l[t]??0;const o=e.teamIds.map(e=>{const t=b.find(t=>String(t.id)===String(e));return t?t.name:"Unknown"}).join(", ");n+=r>1?"  "+a+" (TIE): "+o+" ("+s+" pts each)\n":"  "+a+": "+o+" ("+s+" pts)\n"})}else n+="  (No results recorded)\n";n+="\n"})),n+="================================\n",n+="Scored with SwimMeetScore.com\n",n+="https://swimmeetscore.com\n",n+="Free swim meet scoring tool\n";const l="mailto:?subject="+r+"&body="+encodeURIComponent(n);window.location.href=l},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition "+(I?"bg-chlorine/20 text-chlorine hover:bg-chlorine/30 border border-chlorine/30":"bg-cyan-600 text-white hover:bg-cyan-700"),title:"Email full results"},React.createElement(Mail,{className:"w-4 h-4"}),"Email Results"),React.createElement("div",{className:"relative",ref:ye},React.createElement("button",{onClick:()=>be(!pe),className:"flex items-center px-2 py-1.5 rounded-lg text-xs font-medium transition "+(I?"bg-pool-light/60 text-white hover:bg-pool-light border border-white/10":"bg-slate-600 text-white hover:bg-slate-700"),title:"Export results"},React.createElement(Download,{className:"w-4 h-4"})),pe&&React.createElement("div",{className:"absolute top-full left-0 mt-1 z-40 rounded-lg shadow-lg border min-w-[160px] "+(I?"bg-pool-mid border-white/10":"bg-white border-gray-200")},React.createElement("button",{onClick:()=>{xt(),be(!1)},className:"flex items-center gap-2 w-full px-4 py-2.5 text-xs font-medium rounded-t-lg transition "+(I?"text-white hover:bg-pool-light/50":"text-gray-700 hover:bg-gray-50")},React.createElement(FileText,{className:"w-4 h-4"}),"Download PDF"),React.createElement("button",{onClick:()=>{ht(),be(!1)},className:"flex items-center gap-2 w-full px-4 py-2.5 text-xs font-medium transition "+(I?"text-white hover:bg-pool-light/50":"text-gray-700 hover:bg-gray-50")},React.createElement(Download,{className:"w-4 h-4"}),"Download CSV"),React.createElement("button",{onClick:()=>{vt(),be(!1)},className:"flex items-center gap-2 w-full px-4 py-2.5 text-xs font-medium rounded-b-lg transition "+(I?"text-white hover:bg-pool-light/50":"text-gray-700 hover:bg-gray-50")},React.createElement(Download,{className:"w-4 h-4"}),"Save Meet File"))),React.createElement("div",{className:"flex items-center gap-1 ml-auto sm:ml-2"},React.createElement("button",{onClick:Ye,disabled:!Se,title:"Undo (Ctrl+Z)",className:"p-1.5 rounded-lg transition "+(Se?I?"bg-pool-light/50 hover:bg-pool-light text-white border border-white/10":"bg-cyan-50 hover:bg-cyan-100 text-cyan-700 border border-cyan-200":I?"bg-pool-light/20 text-white/20 border border-white/5 cursor-not-allowed":"bg-gray-100 text-gray-300 border border-gray-200 cursor-not-allowed")},React.createElement(Undo,{className:"w-4 h-4"})),React.createElement("button",{onClick:Ke,disabled:!Ce,title:"Redo (Ctrl+Y)",className:"p-1.5 rounded-lg transition "+(Ce?I?"bg-pool-light/50 hover:bg-pool-light text-white border border-white/10":"bg-cyan-50 hover:bg-cyan-100 text-cyan-700 border border-cyan-200":I?"bg-pool-light/20 text-white/20 border border-white/5 cursor-not-allowed":"bg-gray-100 text-gray-300 border border-gray-200 cursor-not-allowed")},React.createElement(Redo,{className:"w-4 h-4"})))),React.createElement("div",{className:"flex items-center gap-2 flex-wrap mt-2"},React.createElement("button",{onClick:()=>{i(!c),triggerHaptic("light"),trackEvent("toggle_entry_mode",{mode:c?"place-mode":"team-mode"})},className:"flex items-center gap-1 px-0.5 py-0.5 rounded-full text-xs font-medium transition cursor-pointer "+(I?"bg-gray-700 border border-gray-600":"bg-gray-200 border border-gray-300"),title:c?"Switch to Place Mode":"Switch to Team Mode"},React.createElement("span",{className:"px-2 py-0.5 rounded-full transition-all "+(c?I?"text-gray-300":"text-gray-600":I?"bg-chlorine text-pool-deep font-semibold":"bg-cyan-600 text-white font-semibold")},"Place"),React.createElement("span",{className:"px-2 py-0.5 rounded-full transition-all "+(c?I?"bg-lane-gold text-pool-deep font-semibold":"bg-amber-500 text-white font-semibold":I?"text-gray-300":"text-gray-600")},"Team")),h.length>0&&React.createElement("button",{onClick:()=>{const e=h.some(e=>!De[e.id]),t={};h.forEach(a=>{t[a.id]=e}),Oe(t)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition "+(I?"bg-gray-700 text-gray-300 hover:bg-gray-600 border border-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200 border border-gray-300"),title:h.some(e=>!De[e.id])?"Collapse all events":"Expand all events"},React.createElement(ChevronDown,{className:"w-3.5 h-3.5 transition-transform "+(h.some(e=>!De[e.id])?"":"rotate-180")}),h.some(e=>!De[e.id])?"Collapse All":"Expand All"))),c&&React.createElement("div",{className:"text-xs px-3 py-1.5 rounded-full "+(I?"bg-lane-gold/20 text-lane-gold border border-lane-gold/30":"bg-amber-100 text-amber-700 border border-amber-200")},"âš¡ Tap place numbers to assign to each team")),"combined"===L?React.createElement("div",{className:"space-y-2"},h.map((e,t)=>{const a="diving"===getEventType(e),r="relay"===getEventType(e),n=a?ze:r?Ue:He,l=a?$:r?D:F;if(c)return React.createElement(QuickEntryEventCard,{key:e.id,event:e,teams:b,darkMode:I,numPlaces:l,pointSystem:n,onUpdate:ct,onBulkUpdate:it,onMoveUp:()=>nt(t),onMoveDown:()=>lt(t),onRemove:()=>rt(e.id),canMoveUp:t>0,canMoveDown:t<h.length-1,heatLockEnabled:he,aRelayOnly:ve,teamPlaceLimitEnabled:Ee,isCollapsed:De[e.id],onToggle:()=>$e(e.id)});const s=De[e.id];return React.createElement("div",{key:e.id,className:`rounded-xl ${I?"bg-pool-mid/80 border border-white/10":"bg-white border border-slate-200 shadow-sm"} relative`,style:{zIndex:h.length-t}},React.createElement("button",{type:"button",onClick:()=>$e(e.id),className:"w-full flex items-center justify-between px-3 py-2 cursor-pointer transition rounded-xl "+(I?"hover:bg-white/5":"hover:bg-slate-50"),"aria-expanded":!s},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("h4",{className:"font-semibold text-base "+(I?"text-white":"text-slate-800")},React.createElement("span",{className:"girls"===e.gender?I?"text-pink-400":"text-pink-600":I?"text-blue-400":"text-blue-600"},"girls"===e.gender?"G":"B")," ",React.createElement("span",{className:a?I?"text-orange-400":"text-orange-600":""},e.name)),he&&!r&&!a&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 rounded-full whitespace-nowrap "+(I?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-amber-100 text-amber-700 border border-amber-200")},"ðŸ”’ A/B Finals"),ve&&r&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 rounded-full whitespace-nowrap "+(I?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-teal-100 text-teal-700 border border-teal-200")},"ðŸ…°ï¸ Relay Only")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(ChevronDown,{className:`w-5 h-5 transition-transform ${I?"text-slate-400":"text-slate-500"} ${s?"":"rotate-180"}`}))),!s&&React.createElement("div",{className:"px-3 pb-3"},React.createElement("div",{className:"flex items-center justify-end gap-1 mb-2"},React.createElement("button",{onClick:e=>{e.stopPropagation(),nt(t)},disabled:0===t,"aria-label":"Move event up",className:`p-1 rounded ${0===t?"opacity-30 cursor-not-allowed":I?"hover:bg-white/10":"hover:bg-slate-100"} ${I?"text-slate-400":"text-slate-500"}`},React.createElement(ChevronUp,{className:"w-4 h-4"})),React.createElement("button",{onClick:e=>{e.stopPropagation(),lt(t)},disabled:t===h.length-1,"aria-label":"Move event down",className:`p-1 rounded ${t===h.length-1?"opacity-30 cursor-not-allowed":I?"hover:bg-white/10":"hover:bg-slate-100"} ${I?"text-slate-400":"text-slate-500"}`},React.createElement(ChevronDown,{className:"w-4 h-4"})),React.createElement("button",{onClick:t=>{t.stopPropagation(),rt(e.id)},"aria-label":"Remove event",className:"p-1 rounded "+(I?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50")},React.createElement(X,{className:"w-4 h-4"}))),React.createElement("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-1"},(()=>{const t=gt(e);return dt(e).map(a=>React.createElement(PlaceSelector,{key:a,event:e,place:a,teams:b,darkMode:I,pointSystem:n,numPlaces:l,onUpdate:ct,consumedByTie:t.has(a),heatLockEnabled:he}))})())))})):React.createElement("div",null,React.createElement("h4",{className:"text-lg font-semibold mb-4 "+("girls"===L?I?"text-pink-400":"text-pink-600":I?"text-blue-400":"text-blue-600")},"girls"===L?"Girls Events":"Boys Events"),React.createElement("div",{className:"space-y-2"},h.filter(e=>e.gender===L).map((e,t)=>{const a="diving"===getEventType(e),r="relay"===getEventType(e),n=h.findIndex(t=>t.id===e.id),l=a?ze:r?Ue:He,s=a?$:r?D:F;if(c)return React.createElement(QuickEntryEventCard,{key:e.id,event:e,teams:b,darkMode:I,numPlaces:s,pointSystem:l,onUpdate:ct,onBulkUpdate:it,onMoveUp:()=>nt(n),onMoveDown:()=>lt(n),onRemove:()=>rt(e.id),canMoveUp:n>0,canMoveDown:n<h.length-1,heatLockEnabled:he,aRelayOnly:ve,teamPlaceLimitEnabled:Ee,isCollapsed:De[e.id],onToggle:()=>$e(e.id)});const o=De[e.id];return React.createElement("div",{key:e.id,className:`rounded-xl ${I?"bg-pool-mid/80 border border-white/10":"bg-white border border-slate-200 shadow-sm"} relative`,style:{zIndex:h.length-t}},React.createElement("button",{type:"button",onClick:()=>$e(e.id),className:"w-full flex items-center justify-between px-3 py-2 cursor-pointer transition rounded-xl "+(I?"hover:bg-white/5":"hover:bg-slate-50"),"aria-expanded":!o},React.createElement("div",{className:"flex items-center gap-2 flex-wrap"},React.createElement("h4",{className:"font-semibold text-base "+(a?I?"text-orange-400":"text-orange-600":I?"text-white":"text-slate-800")},e.name),he&&!r&&!a&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 rounded-full whitespace-nowrap "+(I?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-amber-100 text-amber-700 border border-amber-200")},"ðŸ”’ A/B Finals"),ve&&r&&React.createElement("span",{className:"text-xs px-1.5 py-0.5 rounded-full whitespace-nowrap "+(I?"bg-teal-500/20 text-teal-400 border border-teal-500/30":"bg-teal-100 text-teal-700 border border-teal-200")},"ðŸ…°ï¸ Relay Only")),React.createElement("div",{className:"flex items-center gap-2"},React.createElement(ChevronDown,{className:`w-5 h-5 transition-transform ${I?"text-slate-400":"text-slate-500"} ${o?"":"rotate-180"}`}))),!o&&React.createElement("div",{className:"px-3 pb-3"},React.createElement("div",{className:"flex items-center justify-end gap-1 mb-2"},React.createElement("button",{onClick:e=>{e.stopPropagation(),nt(n)},disabled:0===n,"aria-label":"Move event up",className:`p-1 rounded ${0===n?"opacity-30 cursor-not-allowed":I?"hover:bg-white/10":"hover:bg-slate-100"} ${I?"text-slate-400":"text-slate-500"}`},React.createElement(ChevronUp,{className:"w-4 h-4"})),React.createElement("button",{onClick:e=>{e.stopPropagation(),lt(n)},disabled:n===h.length-1,"aria-label":"Move event down",className:`p-1 rounded ${n===h.length-1?"opacity-30 cursor-not-allowed":I?"hover:bg-white/10":"hover:bg-slate-100"} ${I?"text-slate-400":"text-slate-500"}`},React.createElement(ChevronDown,{className:"w-4 h-4"})),React.createElement("button",{onClick:t=>{t.stopPropagation(),rt(e.id)},"aria-label":"Remove event",className:"p-1 rounded "+(I?"text-red-400 hover:bg-red-500/20":"text-red-500 hover:bg-red-50")},React.createElement(X,{className:"w-4 h-4"}))),React.createElement("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-1"},(()=>{const t=gt(e);return dt(e).map(a=>React.createElement(PlaceSelector,{key:a,event:e,place:a,teams:b,darkMode:I,pointSystem:l,numPlaces:s,onUpdate:ct,consumedByTie:t.has(a),heatLockEnabled:he}))})())))}))),React.createElement("div",{className:"rounded-lg p-4 mt-6 "+(I?"bg-gray-700":"bg-gray-100")},React.createElement("h4",{className:"font-semibold mb-3 "+(I?"text-white":"text-gray-800")},"Add New Event"),React.createElement("div",{className:"flex flex-col sm:flex-row gap-2 mb-2"},React.createElement("input",{type:"text",id:"new-event-name",name:"new-event-name",value:Q,onChange:e=>Y(e.target.value),onKeyDown:e=>"Enter"===e.key&&at(),placeholder:"diving"===ee?"Diving (name auto-filled)":"relay"===ee?"e.g., 200 Medley":"e.g., 100 Backstroke",disabled:"diving"===ee,"aria-label":"Event name",className:`flex-1 px-3 py-2 border rounded-lg ${I?"bg-gray-600 border-gray-500 text-white placeholder-gray-400":"bg-white border-gray-300"} ${"diving"===ee?"opacity-50":""}`}),React.createElement("div",{className:"flex gap-2 flex-wrap"},React.createElement("select",{id:"new-event-type",name:"new-event-type",value:ee,onChange:e=>{te(e.target.value),"diving"===e.target.value?Y("Diving"):"Diving"===Q&&Y("")},"aria-label":"Event type",className:"flex-1 sm:flex-none px-3 py-2 border rounded-lg "+(I?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300")},React.createElement("option",{value:"individual"},"Individual"),React.createElement("option",{value:"relay"},"Relay"),React.createElement("option",{value:"diving"},"Diving")),React.createElement("select",{id:"new-event-gender",name:"new-event-gender",value:K,onChange:e=>Z(e.target.value),"aria-label":"Event gender",className:"flex-1 sm:flex-none px-3 py-2 border rounded-lg "+(I?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300")},React.createElement("option",{value:"girls"},"Girls"),React.createElement("option",{value:"boys"},"Boys")),React.createElement("button",{onClick:at,className:"flex-1 sm:flex-none px-4 py-2 rounded-lg flex items-center justify-center gap-2 text-white "+(I?"bg-cyan-700 hover:bg-cyan-800":"bg-blue-600 hover:bg-blue-700")},React.createElement(Plus,{className:"w-4 h-4"})," Add"))),React.createElement("p",{className:"text-xs "+(I?"text-gray-300":"text-gray-500")},"diving"===ee&&"Diving events use their own point system","relay"===ee&&'"Relay" will be automatically added to the event name',"individual"===ee&&"Individual swimming events"))))),React.createElement("footer",{className:"mt-8 py-6 border-t "+(I?"border-gray-700":"border-gray-200")},React.createElement("div",{className:"max-w-4xl mx-auto px-4"},React.createElement("div",{className:"mb-6"},React.createElement("h4",{className:"font-semibold mb-2 "+(I?"text-white":"text-gray-800")},"Contact Us"),React.createElement("div",{className:"space-y-1 text-sm "+(I?"text-gray-300":"text-gray-600")},React.createElement("div",null,React.createElement("span",{className:I?"text-gray-400":"text-gray-500"},"General Inquiries: "),React.createElement("a",{href:"mailto:info@swimmeetscore.com",className:"text-cyan-600 hover:text-cyan-700 hover:underline"},"info@swimmeetscore.com")),React.createElement("div",null,React.createElement("span",{className:I?"text-gray-400":"text-gray-500"},"Support: "),React.createElement("a",{href:"mailto:support@swimmeetscore.com",className:"text-cyan-600 hover:text-cyan-700 hover:underline"},"support@swimmeetscore.com")))),React.createElement("div",{className:"mt-6 p-6 rounded-xl text-center "+(I?"bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30":"bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200")},React.createElement("p",{className:"text-lg font-medium mb-2 "+(I?"text-white":"text-gray-800")},"â˜• Enjoying Swim Meet Score?"),React.createElement("p",{className:"text-sm mb-4 "+(I?"text-gray-300":"text-gray-600")},"SwimMeetScore is free and ad-free. If it saved you time today, consider a coffee!"),React.createElement("a",{href:"https://buymeacoffee.com/kadenco",target:"_blank",rel:"noopener noreferrer",onClick:()=>trackEvent("click_donate"),className:"inline-flex items-center gap-3 px-8 py-4 bg-yellow-400 hover:bg-yellow-500 text-gray-900 font-bold text-lg rounded-xl transition shadow-lg hover:shadow-xl hover:scale-105 transform"},React.createElement("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"currentColor"},React.createElement("path",{d:"M4 19h16v2H4v-2zm16-12h-2V5H6v2H4V5c0-1.1.9-2 2-2h12c1.1 0 2 .9 2 2v2zm-2 2H6c-1.1 0-2 .9-2 2v5c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-1h1c1.1 0 2-.9 2-2v-2c0-1.1-.9-2-2-2h-1zm1 4h-1v-2h1v2zm-3 3H6v-5h12v5z"})),"Buy Me a Coffee")),React.createElement("div",{className:"mt-6 pt-4 border-t text-center text-sm "+(I?"border-gray-700 text-gray-400":"border-gray-200 text-gray-500")},"Copyright Â© 2026 Kaden Co - All rights reserved."),React.createElement("div",{className:`mt-4 text-xs ${I?"text-gray-500":"text-gray-400"} text-center max-w-2xl mx-auto`},React.createElement("p",{className:"mb-2"},React.createElement("strong",null,"Terms of Use:"),' This application is provided "as is" without warranties. Users are responsible for the accuracy of data entered. Swim Meet Score is not liable for any scoring errors or data loss.'),React.createElement("p",null,React.createElement("strong",null,"Privacy & Data:")," Your meet data is stored locally in your browser using localStorage and is never transmitted to our servers. We use Google Analytics to collect anonymous usage statistics (pages visited, features used) to improve the app. No personal information is required to use this application. By using SwimMeetScore, you consent to this data collection.")))))}class ErrorBoundary extends React.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){"function"==typeof trackEvent&&trackEvent("react_error",{error:e.message,stack:(t.componentStack||"").slice(0,200)})}render(){return this.state.hasError?React.createElement("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0a1628",color:"#e2e8f0",fontFamily:"system-ui, sans-serif",padding:"24px",textAlign:"center"}},React.createElement("div",{style:{maxWidth:"400px"}},React.createElement("h1",{style:{fontSize:"24px",marginBottom:"12px",color:"#f87171"}},"Something went wrong"),React.createElement("p",{style:{marginBottom:"16px",color:"#94a3b8"}},"An unexpected error occurred. Please reload the page to continue."),React.createElement("button",{onClick:()=>location.reload(),style:{padding:"10px 24px",background:"#06b6d4",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",cursor:"pointer"}},"Reload"))):this.props.children}}const root=ReactDOM.createRoot(document.getElementById("root"));root.render(React.createElement(ErrorBoundary,null,React.createElement(SwimMeetScore,null))),hideLoadingScreen();